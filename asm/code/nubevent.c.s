.include "macros.inc"

.section .text, "ax"  # 0x80006940 - 0x80418B80
.global "TRKDestructEvent"
"TRKDestructEvent":
/* 8040FB74 0040B814  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8040FB78 0040B818  7C 08 02 A6 */	mflr r0
/* 8040FB7C 0040B81C  90 01 00 14 */	stw r0, 0x14(r1)
/* 8040FB80 0040B820  80 63 00 08 */	lwz r3, 8(r3)
/* 8040FB84 0040B824  48 00 0A 39 */	bl "TRKReleaseBuffer"
/* 8040FB88 0040B828  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8040FB8C 0040B82C  7C 08 03 A6 */	mtlr r0
/* 8040FB90 0040B830  38 21 00 10 */	addi r1, r1, 0x10
/* 8040FB94 0040B834  4E 80 00 20 */	blr 

.global "TRKConstructEvent"
"TRKConstructEvent":
/* 8040FB98 0040B838  90 83 00 00 */	stw r4, 0(r3)
/* 8040FB9C 0040B83C  38 80 00 00 */	li r4, 0
/* 8040FBA0 0040B840  38 00 FF FF */	li r0, -1
/* 8040FBA4 0040B844  90 83 00 04 */	stw r4, 4(r3)
/* 8040FBA8 0040B848  90 03 00 08 */	stw r0, 8(r3)
/* 8040FBAC 0040B84C  4E 80 00 20 */	blr 

.global "TRKPostEvent"
"TRKPostEvent":
/* 8040FBB0 0040B850  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 8040FBB4 0040B854  7C 08 02 A6 */	mflr r0
/* 8040FBB8 0040B858  3C 80 80 5D */	lis r4, "gTRKEventQueue"@ha
/* 8040FBBC 0040B85C  90 01 00 24 */	stw r0, 0x24(r1)
/* 8040FBC0 0040B860  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 8040FBC4 0040B864  3B E0 00 00 */	li r31, 0
/* 8040FBC8 0040B868  93 C1 00 18 */	stw r30, 0x18(r1)
/* 8040FBCC 0040B86C  93 A1 00 14 */	stw r29, 0x14(r1)
/* 8040FBD0 0040B870  7C 7D 1B 78 */	mr r29, r3
/* 8040FBD4 0040B874  38 64 20 B0 */	addi r3, r4, "gTRKEventQueue"@l
/* 8040FBD8 0040B878  48 00 26 C9 */	bl "TRKAcquireMutex"
/* 8040FBDC 0040B87C  3C 60 80 5D */	lis r3, "gTRKEventQueue"@ha
/* 8040FBE0 0040B880  3B C3 20 B0 */	addi r30, r3, "gTRKEventQueue"@l
/* 8040FBE4 0040B884  80 7E 00 04 */	lwz r3, 4(r30)
/* 8040FBE8 0040B888  2C 03 00 02 */	cmpwi r3, 2
/* 8040FBEC 0040B88C  40 82 00 0C */	bne lbl_8040FBF8
/* 8040FBF0 0040B890  3B E0 01 00 */	li r31, 0x100
/* 8040FBF4 0040B894  48 00 00 70 */	b lbl_8040FC64
lbl_8040FBF8:
/* 8040FBF8 0040B898  80 1E 00 08 */	lwz r0, 8(r30)
/* 8040FBFC 0040B89C  7F A4 EB 78 */	mr r4, r29
/* 8040FC00 0040B8A0  38 A0 00 0C */	li r5, 0xc
/* 8040FC04 0040B8A4  7C 00 1A 14 */	add r0, r0, r3
/* 8040FC08 0040B8A8  54 03 0F FE */	srwi r3, r0, 0x1f
/* 8040FC0C 0040B8AC  54 00 07 FE */	clrlwi r0, r0, 0x1f
/* 8040FC10 0040B8B0  7C 00 1A 78 */	xor r0, r0, r3
/* 8040FC14 0040B8B4  7C 03 00 50 */	subf r0, r3, r0
/* 8040FC18 0040B8B8  1F A0 00 0C */	mulli r29, r0, 0xc
/* 8040FC1C 0040B8BC  7C 7E EA 14 */	add r3, r30, r29
/* 8040FC20 0040B8C0  38 63 00 0C */	addi r3, r3, 0xc
/* 8040FC24 0040B8C4  4B BF 48 79 */	bl "TRK_memcpy"
/* 8040FC28 0040B8C8  3C 60 80 5D */	lis r3, "gTRKEventQueue"@ha
/* 8040FC2C 0040B8CC  38 83 20 B0 */	addi r4, r3, "gTRKEventQueue"@l
/* 8040FC30 0040B8D0  80 04 00 24 */	lwz r0, 0x24(r4)
/* 8040FC34 0040B8D4  7C 64 EA 14 */	add r3, r4, r29
/* 8040FC38 0040B8D8  90 03 00 10 */	stw r0, 0x10(r3)
/* 8040FC3C 0040B8DC  80 64 00 24 */	lwz r3, 0x24(r4)
/* 8040FC40 0040B8E0  38 03 00 01 */	addi r0, r3, 1
/* 8040FC44 0040B8E4  28 00 01 00 */	cmplwi r0, 0x100
/* 8040FC48 0040B8E8  90 04 00 24 */	stw r0, 0x24(r4)
/* 8040FC4C 0040B8EC  40 80 00 0C */	bge lbl_8040FC58
/* 8040FC50 0040B8F0  38 00 01 00 */	li r0, 0x100
/* 8040FC54 0040B8F4  90 04 00 24 */	stw r0, 0x24(r4)
lbl_8040FC58:
/* 8040FC58 0040B8F8  80 7E 00 04 */	lwz r3, 4(r30)
/* 8040FC5C 0040B8FC  38 03 00 01 */	addi r0, r3, 1
/* 8040FC60 0040B900  90 1E 00 04 */	stw r0, 4(r30)
lbl_8040FC64:
/* 8040FC64 0040B904  3C 60 80 5D */	lis r3, "gTRKEventQueue"@ha
/* 8040FC68 0040B908  38 63 20 B0 */	addi r3, r3, "gTRKEventQueue"@l
/* 8040FC6C 0040B90C  48 00 26 2D */	bl "TRKReleaseMutex"
/* 8040FC70 0040B910  80 01 00 24 */	lwz r0, 0x24(r1)
/* 8040FC74 0040B914  7F E3 FB 78 */	mr r3, r31
/* 8040FC78 0040B918  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 8040FC7C 0040B91C  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 8040FC80 0040B920  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 8040FC84 0040B924  7C 08 03 A6 */	mtlr r0
/* 8040FC88 0040B928  38 21 00 20 */	addi r1, r1, 0x20
/* 8040FC8C 0040B92C  4E 80 00 20 */	blr 

.global "TRKGetNextEvent"
"TRKGetNextEvent":
/* 8040FC90 0040B930  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 8040FC94 0040B934  7C 08 02 A6 */	mflr r0
/* 8040FC98 0040B938  3C 80 80 5D */	lis r4, "gTRKEventQueue"@ha
/* 8040FC9C 0040B93C  90 01 00 24 */	stw r0, 0x24(r1)
/* 8040FCA0 0040B940  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 8040FCA4 0040B944  93 C1 00 18 */	stw r30, 0x18(r1)
/* 8040FCA8 0040B948  3B C0 00 00 */	li r30, 0
/* 8040FCAC 0040B94C  93 A1 00 14 */	stw r29, 0x14(r1)
/* 8040FCB0 0040B950  7C 7D 1B 78 */	mr r29, r3
/* 8040FCB4 0040B954  38 64 20 B0 */	addi r3, r4, "gTRKEventQueue"@l
/* 8040FCB8 0040B958  48 00 25 E9 */	bl "TRKAcquireMutex"
/* 8040FCBC 0040B95C  3C 60 80 5D */	lis r3, "gTRKEventQueue"@ha
/* 8040FCC0 0040B960  3B E3 20 B0 */	addi r31, r3, "gTRKEventQueue"@l
/* 8040FCC4 0040B964  80 1F 00 04 */	lwz r0, 4(r31)
/* 8040FCC8 0040B968  2C 00 00 00 */	cmpwi r0, 0
/* 8040FCCC 0040B96C  40 81 00 4C */	ble lbl_8040FD18
/* 8040FCD0 0040B970  80 1F 00 08 */	lwz r0, 8(r31)
/* 8040FCD4 0040B974  7F A3 EB 78 */	mr r3, r29
/* 8040FCD8 0040B978  38 A0 00 0C */	li r5, 0xc
/* 8040FCDC 0040B97C  1C 00 00 0C */	mulli r0, r0, 0xc
/* 8040FCE0 0040B980  7C 9F 02 14 */	add r4, r31, r0
/* 8040FCE4 0040B984  38 84 00 0C */	addi r4, r4, 0xc
/* 8040FCE8 0040B988  4B BF 47 B5 */	bl "TRK_memcpy"
/* 8040FCEC 0040B98C  80 7F 00 08 */	lwz r3, 8(r31)
/* 8040FCF0 0040B990  80 9F 00 04 */	lwz r4, 4(r31)
/* 8040FCF4 0040B994  38 03 00 01 */	addi r0, r3, 1
/* 8040FCF8 0040B998  38 64 FF FF */	addi r3, r4, -1
/* 8040FCFC 0040B99C  90 1F 00 08 */	stw r0, 8(r31)
/* 8040FD00 0040B9A0  2C 00 00 02 */	cmpwi r0, 2
/* 8040FD04 0040B9A4  90 7F 00 04 */	stw r3, 4(r31)
/* 8040FD08 0040B9A8  40 82 00 0C */	bne lbl_8040FD14
/* 8040FD0C 0040B9AC  38 00 00 00 */	li r0, 0
/* 8040FD10 0040B9B0  90 1F 00 08 */	stw r0, 8(r31)
lbl_8040FD14:
/* 8040FD14 0040B9B4  3B C0 00 01 */	li r30, 1
lbl_8040FD18:
/* 8040FD18 0040B9B8  3C 60 80 5D */	lis r3, "gTRKEventQueue"@ha
/* 8040FD1C 0040B9BC  38 63 20 B0 */	addi r3, r3, "gTRKEventQueue"@l
/* 8040FD20 0040B9C0  48 00 25 79 */	bl "TRKReleaseMutex"
/* 8040FD24 0040B9C4  80 01 00 24 */	lwz r0, 0x24(r1)
/* 8040FD28 0040B9C8  7F C3 F3 78 */	mr r3, r30
/* 8040FD2C 0040B9CC  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 8040FD30 0040B9D0  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 8040FD34 0040B9D4  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 8040FD38 0040B9D8  7C 08 03 A6 */	mtlr r0
/* 8040FD3C 0040B9DC  38 21 00 20 */	addi r1, r1, 0x20
/* 8040FD40 0040B9E0  4E 80 00 20 */	blr 

.global "TRKInitializeEventQueue"
"TRKInitializeEventQueue":
/* 8040FD44 0040B9E4  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8040FD48 0040B9E8  7C 08 02 A6 */	mflr r0
/* 8040FD4C 0040B9EC  3C 60 80 5D */	lis r3, "gTRKEventQueue"@ha
/* 8040FD50 0040B9F0  90 01 00 14 */	stw r0, 0x14(r1)
/* 8040FD54 0040B9F4  38 63 20 B0 */	addi r3, r3, "gTRKEventQueue"@l
/* 8040FD58 0040B9F8  48 00 25 51 */	bl "TRKInitializeMutex"
/* 8040FD5C 0040B9FC  3C 60 80 5D */	lis r3, "gTRKEventQueue"@ha
/* 8040FD60 0040BA00  38 63 20 B0 */	addi r3, r3, "gTRKEventQueue"@l
/* 8040FD64 0040BA04  48 00 25 3D */	bl "TRKAcquireMutex"
/* 8040FD68 0040BA08  3C 60 80 5D */	lis r3, "gTRKEventQueue"@ha
/* 8040FD6C 0040BA0C  38 80 00 00 */	li r4, 0
/* 8040FD70 0040BA10  38 63 20 B0 */	addi r3, r3, "gTRKEventQueue"@l
/* 8040FD74 0040BA14  38 00 01 00 */	li r0, 0x100
/* 8040FD78 0040BA18  90 83 00 04 */	stw r4, 4(r3)
/* 8040FD7C 0040BA1C  90 83 00 08 */	stw r4, 8(r3)
/* 8040FD80 0040BA20  90 03 00 24 */	stw r0, 0x24(r3)
/* 8040FD84 0040BA24  48 00 25 15 */	bl "TRKReleaseMutex"
/* 8040FD88 0040BA28  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8040FD8C 0040BA2C  38 60 00 00 */	li r3, 0
/* 8040FD90 0040BA30  7C 08 03 A6 */	mtlr r0
/* 8040FD94 0040BA34  38 21 00 10 */	addi r1, r1, 0x10
/* 8040FD98 0040BA38  4E 80 00 20 */	blr 
