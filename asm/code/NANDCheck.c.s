.include "macros.inc"

.section .text, "ax"  # 0x80006940 - 0x80418B80
.global "nandCalcUsage"
"nandCalcUsage":
/* 803D9DF0 003D5A90  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 803D9DF4 003D5A94  7C 08 02 A6 */	mflr r0
/* 803D9DF8 003D5A98  90 01 00 24 */	stw r0, 0x24(r1)
/* 803D9DFC 003D5A9C  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 803D9E00 003D5AA0  3B E0 00 00 */	li r31, 0
/* 803D9E04 003D5AA4  93 C1 00 18 */	stw r30, 0x18(r1)
/* 803D9E08 003D5AA8  7C BE 2B 78 */	mr r30, r5
/* 803D9E0C 003D5AAC  93 A1 00 14 */	stw r29, 0x14(r1)
/* 803D9E10 003D5AB0  7C 9D 23 78 */	mr r29, r4
/* 803D9E14 003D5AB4  93 81 00 10 */	stw r28, 0x10(r1)
/* 803D9E18 003D5AB8  7C 7C 1B 78 */	mr r28, r3
/* 803D9E1C 003D5ABC  93 E3 00 00 */	stw r31, 0(r3)
/* 803D9E20 003D5AC0  38 60 FF 8B */	li r3, -117
/* 803D9E24 003D5AC4  93 E4 00 00 */	stw r31, 0(r4)
/* 803D9E28 003D5AC8  48 00 00 58 */	b lbl_803D9E80
lbl_803D9E2C:
/* 803D9E2C 003D5ACC  93 E1 00 0C */	stw r31, 0xc(r1)
/* 803D9E30 003D5AD0  38 81 00 0C */	addi r4, r1, 0xc
/* 803D9E34 003D5AD4  38 A1 00 08 */	addi r5, r1, 8
/* 803D9E38 003D5AD8  93 E1 00 08 */	stw r31, 8(r1)
/* 803D9E3C 003D5ADC  80 7E 00 00 */	lwz r3, 0(r30)
/* 803D9E40 003D5AE0  4B F9 97 F5 */	bl "ISFS_GetUsage"
/* 803D9E44 003D5AE4  2C 03 00 00 */	cmpwi r3, 0
/* 803D9E48 003D5AE8  40 82 00 28 */	bne lbl_803D9E70
/* 803D9E4C 003D5AEC  80 9C 00 00 */	lwz r4, 0(r28)
/* 803D9E50 003D5AF0  80 01 00 0C */	lwz r0, 0xc(r1)
/* 803D9E54 003D5AF4  7C 04 02 14 */	add r0, r4, r0
/* 803D9E58 003D5AF8  90 1C 00 00 */	stw r0, 0(r28)
/* 803D9E5C 003D5AFC  80 9D 00 00 */	lwz r4, 0(r29)
/* 803D9E60 003D5B00  80 01 00 08 */	lwz r0, 8(r1)
/* 803D9E64 003D5B04  7C 04 02 14 */	add r0, r4, r0
/* 803D9E68 003D5B08  90 1D 00 00 */	stw r0, 0(r29)
/* 803D9E6C 003D5B0C  48 00 00 10 */	b lbl_803D9E7C
lbl_803D9E70:
/* 803D9E70 003D5B10  2C 03 FF 96 */	cmpwi r3, -106
/* 803D9E74 003D5B14  40 82 00 18 */	bne lbl_803D9E8C
/* 803D9E78 003D5B18  38 60 00 00 */	li r3, 0
lbl_803D9E7C:
/* 803D9E7C 003D5B1C  3B DE 00 04 */	addi r30, r30, 4
lbl_803D9E80:
/* 803D9E80 003D5B20  80 1E 00 00 */	lwz r0, 0(r30)
/* 803D9E84 003D5B24  2C 00 00 00 */	cmpwi r0, 0
/* 803D9E88 003D5B28  40 82 FF A4 */	bne lbl_803D9E2C
lbl_803D9E8C:
/* 803D9E8C 003D5B2C  80 01 00 24 */	lwz r0, 0x24(r1)
/* 803D9E90 003D5B30  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 803D9E94 003D5B34  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 803D9E98 003D5B38  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 803D9E9C 003D5B3C  83 81 00 10 */	lwz r28, 0x10(r1)
/* 803D9EA0 003D5B40  7C 08 03 A6 */	mtlr r0
/* 803D9EA4 003D5B44  38 21 00 20 */	addi r1, r1, 0x20
/* 803D9EA8 003D5B48  4E 80 00 20 */	blr

.global "NANDCheck"
"NANDCheck":
/* 803D9EAC 003D5B4C  94 21 FF D0 */	stwu r1, -0x30(r1)
/* 803D9EB0 003D5B50  7C 08 02 A6 */	mflr r0
/* 803D9EB4 003D5B54  90 01 00 34 */	stw r0, 0x34(r1)
/* 803D9EB8 003D5B58  38 00 FF FF */	li r0, -1
/* 803D9EBC 003D5B5C  93 E1 00 2C */	stw r31, 0x2c(r1)
/* 803D9EC0 003D5B60  7C BF 2B 78 */	mr r31, r5
/* 803D9EC4 003D5B64  93 C1 00 28 */	stw r30, 0x28(r1)
/* 803D9EC8 003D5B68  7C 9E 23 78 */	mr r30, r4
/* 803D9ECC 003D5B6C  93 A1 00 24 */	stw r29, 0x24(r1)
/* 803D9ED0 003D5B70  7C 7D 1B 78 */	mr r29, r3
/* 803D9ED4 003D5B74  90 01 00 14 */	stw r0, 0x14(r1)
/* 803D9ED8 003D5B78  90 01 00 10 */	stw r0, 0x10(r1)
/* 803D9EDC 003D5B7C  90 01 00 0C */	stw r0, 0xc(r1)
/* 803D9EE0 003D5B80  90 01 00 08 */	stw r0, 8(r1)
/* 803D9EE4 003D5B84  4B FF F2 95 */	bl "nandIsInitialized"
/* 803D9EE8 003D5B88  2C 03 00 00 */	cmpwi r3, 0
/* 803D9EEC 003D5B8C  40 82 00 0C */	bne lbl_803D9EF8
/* 803D9EF0 003D5B90  38 60 FF 80 */	li r3, -128
/* 803D9EF4 003D5B94  48 00 00 A4 */	b lbl_803D9F98
lbl_803D9EF8:
/* 803D9EF8 003D5B98  4B FF FE 51 */	bl "nandGetHomeDir"
/* 803D9EFC 003D5B9C  38 81 00 14 */	addi r4, r1, 0x14
/* 803D9F00 003D5BA0  38 A1 00 10 */	addi r5, r1, 0x10
/* 803D9F04 003D5BA4  4B F9 97 31 */	bl "ISFS_GetUsage"
/* 803D9F08 003D5BA8  2C 03 00 00 */	cmpwi r3, 0
/* 803D9F0C 003D5BAC  41 82 00 0C */	beq lbl_803D9F18
/* 803D9F10 003D5BB0  4B FF F2 81 */	bl "nandConvertErrorCode"
/* 803D9F14 003D5BB4  48 00 00 84 */	b lbl_803D9F98
lbl_803D9F18:
/* 803D9F18 003D5BB8  3C A0 80 47 */	lis r5, "USER_DIR_LIST"@ha
/* 803D9F1C 003D5BBC  38 61 00 0C */	addi r3, r1, 0xc
/* 803D9F20 003D5BC0  38 81 00 08 */	addi r4, r1, 8
/* 803D9F24 003D5BC4  38 A5 5F E0 */	addi r5, r5, "USER_DIR_LIST"@l
/* 803D9F28 003D5BC8  4B FF FE C9 */	bl "nandCalcUsage"
/* 803D9F2C 003D5BCC  2C 03 00 00 */	cmpwi r3, 0
/* 803D9F30 003D5BD0  41 82 00 0C */	beq lbl_803D9F3C
/* 803D9F34 003D5BD4  4B FF F2 5D */	bl "nandConvertErrorCode"
/* 803D9F38 003D5BD8  48 00 00 60 */	b lbl_803D9F98
lbl_803D9F3C:
/* 803D9F3C 003D5BDC  80 01 00 14 */	lwz r0, 0x14(r1)
/* 803D9F40 003D5BE0  38 A0 00 00 */	li r5, 0
/* 803D9F44 003D5BE4  80 81 00 08 */	lwz r4, 8(r1)
/* 803D9F48 003D5BE8  7C 00 EA 14 */	add r0, r0, r29
/* 803D9F4C 003D5BEC  80 61 00 0C */	lwz r3, 0xc(r1)
/* 803D9F50 003D5BF0  28 00 04 00 */	cmplwi r0, 0x400
/* 803D9F54 003D5BF4  80 01 00 10 */	lwz r0, 0x10(r1)
/* 803D9F58 003D5BF8  40 81 00 08 */	ble lbl_803D9F60
/* 803D9F5C 003D5BFC  60 A5 00 01 */	ori r5, r5, 1
lbl_803D9F60:
/* 803D9F60 003D5C00  7C 00 F2 14 */	add r0, r0, r30
/* 803D9F64 003D5C04  28 00 00 21 */	cmplwi r0, 0x21
/* 803D9F68 003D5C08  40 81 00 08 */	ble lbl_803D9F70
/* 803D9F6C 003D5C0C  60 A5 00 02 */	ori r5, r5, 2
lbl_803D9F70:
/* 803D9F70 003D5C10  7C 03 EA 14 */	add r0, r3, r29
/* 803D9F74 003D5C14  28 00 44 00 */	cmplwi r0, 0x4400
/* 803D9F78 003D5C18  40 81 00 08 */	ble lbl_803D9F80
/* 803D9F7C 003D5C1C  60 A5 00 04 */	ori r5, r5, 4
lbl_803D9F80:
/* 803D9F80 003D5C20  7C 04 F2 14 */	add r0, r4, r30
/* 803D9F84 003D5C24  28 00 0F A0 */	cmplwi r0, 0xfa0
/* 803D9F88 003D5C28  40 81 00 08 */	ble lbl_803D9F90
/* 803D9F8C 003D5C2C  60 A5 00 08 */	ori r5, r5, 8
lbl_803D9F90:
/* 803D9F90 003D5C30  90 BF 00 00 */	stw r5, 0(r31)
/* 803D9F94 003D5C34  38 60 00 00 */	li r3, 0
lbl_803D9F98:
/* 803D9F98 003D5C38  80 01 00 34 */	lwz r0, 0x34(r1)
/* 803D9F9C 003D5C3C  83 E1 00 2C */	lwz r31, 0x2c(r1)
/* 803D9FA0 003D5C40  83 C1 00 28 */	lwz r30, 0x28(r1)
/* 803D9FA4 003D5C44  83 A1 00 24 */	lwz r29, 0x24(r1)
/* 803D9FA8 003D5C48  7C 08 03 A6 */	mtlr r0
/* 803D9FAC 003D5C4C  38 21 00 30 */	addi r1, r1, 0x30
/* 803D9FB0 003D5C50  4E 80 00 20 */	blr

.section .data, "wa"  # 0x80420060 - 0x80488160
	# ROM: 0x472060
	.asciz "/title/00010000"
	.asciz "/title/00010001"
	.asciz "/title/00010003"
	.asciz "/title/00010004"
	.asciz "/title/00010005"
	.asciz "/title/00010006"
	.asciz "/title/00010007"
	.asciz "/shared2/title"
	.byte 0x00

.global "USER_DIR_LIST"
"USER_DIR_LIST":
	# ROM: 0x4720E0
	.4byte 0x805D7758 ;# ptr
	.4byte 0x805D7760 ;# ptr
	.4byte 0x80475F60 ;# ptr
	.4byte 0x80475F70 ;# ptr
	.4byte 0x80475F80 ;# ptr
	.4byte 0x80475F90 ;# ptr
	.4byte 0x80475FA0 ;# ptr
	.4byte 0x80475FB0 ;# ptr
	.4byte 0x80475FC0 ;# ptr
	.4byte 0x80475FD0 ;# ptr
	.4byte 0x00000000
	.4byte 0x00000000


.section .sdata, "wa"  # 0x805D46E0 - 0x805D79C0
	# ROM: 0x4872D8
	.asciz "/meta"
	.byte 0x00, 0x00
	.asciz "/ticket"

