.include "macros.inc"

.section .text, "ax"  # 0x80006940 - 0x80418B80
.global "OSGetTime"
"OSGetTime":
/* 803E4018 003DFCB8  7C 6D 42 E6 */	mftbu r3
/* 803E401C 003DFCBC  7C 8C 42 E6 */	mftb r4, 0x10c
/* 803E4020 003DFCC0  7C AD 42 E6 */	mftbu r5
/* 803E4024 003DFCC4  7C 03 28 00 */	cmpw r3, r5
/* 803E4028 003DFCC8  40 82 FF F0 */	bne "OSGetTime"
/* 803E402C 003DFCCC  4E 80 00 20 */	blr 

.global "OSGetTick"
"OSGetTick":
/* 803E4030 003DFCD0  7C 6C 42 E6 */	mftb r3, 0x10c
/* 803E4034 003DFCD4  4E 80 00 20 */	blr 

.global "__OSGetSystemTime"
"__OSGetSystemTime":
/* 803E4038 003DFCD8  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 803E403C 003DFCDC  7C 08 02 A6 */	mflr r0
/* 803E4040 003DFCE0  90 01 00 24 */	stw r0, 0x24(r1)
/* 803E4044 003DFCE4  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 803E4048 003DFCE8  93 C1 00 18 */	stw r30, 0x18(r1)
/* 803E404C 003DFCEC  93 A1 00 14 */	stw r29, 0x14(r1)
/* 803E4050 003DFCF0  4B FF C4 0D */	bl "__RAS_OSDisableInterrupts_begin"
/* 803E4054 003DFCF4  7C 7F 1B 78 */	mr r31, r3
/* 803E4058 003DFCF8  4B FF FF C1 */	bl "OSGetTime"
/* 803E405C 003DFCFC  3C C0 80 00 */	lis r6, 0x800030DC@ha
/* 803E4060 003DFD00  80 A6 30 DC */	lwz r5, 0x800030DC@l(r6)
/* 803E4064 003DFD04  80 06 30 D8 */	lwz r0, 0x30d8(r6)
/* 803E4068 003DFD08  7F A5 20 14 */	addc r29, r5, r4
/* 803E406C 003DFD0C  7F C0 19 14 */	adde r30, r0, r3
/* 803E4070 003DFD10  7F E3 FB 78 */	mr r3, r31
/* 803E4074 003DFD14  4B FF C4 11 */	bl "OSRestoreInterrupts"
/* 803E4078 003DFD18  7F A4 EB 78 */	mr r4, r29
/* 803E407C 003DFD1C  7F C3 F3 78 */	mr r3, r30
/* 803E4080 003DFD20  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 803E4084 003DFD24  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 803E4088 003DFD28  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 803E408C 003DFD2C  80 01 00 24 */	lwz r0, 0x24(r1)
/* 803E4090 003DFD30  7C 08 03 A6 */	mtlr r0
/* 803E4094 003DFD34  38 21 00 20 */	addi r1, r1, 0x20
/* 803E4098 003DFD38  4E 80 00 20 */	blr 

.global "__OSTimeToSystemTime"
"__OSTimeToSystemTime":
/* 803E409C 003DFD3C  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 803E40A0 003DFD40  7C 08 02 A6 */	mflr r0
/* 803E40A4 003DFD44  90 01 00 14 */	stw r0, 0x14(r1)
/* 803E40A8 003DFD48  93 E1 00 0C */	stw r31, 0xc(r1)
/* 803E40AC 003DFD4C  7C 7F 1B 78 */	mr r31, r3
/* 803E40B0 003DFD50  93 C1 00 08 */	stw r30, 8(r1)
/* 803E40B4 003DFD54  7C 9E 23 78 */	mr r30, r4
/* 803E40B8 003DFD58  4B FF C3 A5 */	bl "__RAS_OSDisableInterrupts_begin"
/* 803E40BC 003DFD5C  3C A0 80 00 */	lis r5, 0x800030DC@ha
/* 803E40C0 003DFD60  80 85 30 DC */	lwz r4, 0x800030DC@l(r5)
/* 803E40C4 003DFD64  80 05 30 D8 */	lwz r0, 0x30d8(r5)
/* 803E40C8 003DFD68  7F C4 F0 14 */	addc r30, r4, r30
/* 803E40CC 003DFD6C  7F E0 F9 14 */	adde r31, r0, r31
/* 803E40D0 003DFD70  4B FF C3 B5 */	bl "OSRestoreInterrupts"
/* 803E40D4 003DFD74  7F E3 FB 78 */	mr r3, r31
/* 803E40D8 003DFD78  7F C4 F3 78 */	mr r4, r30
/* 803E40DC 003DFD7C  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 803E40E0 003DFD80  83 C1 00 08 */	lwz r30, 8(r1)
/* 803E40E4 003DFD84  80 01 00 14 */	lwz r0, 0x14(r1)
/* 803E40E8 003DFD88  7C 08 03 A6 */	mtlr r0
/* 803E40EC 003DFD8C  38 21 00 10 */	addi r1, r1, 0x10
/* 803E40F0 003DFD90  4E 80 00 20 */	blr 

.global "GetDates"
"GetDates":
/* 803E40F4 003DFD94  3C E0 92 49 */	lis r7, 0x92492493@ha
/* 803E40F8 003DFD98  3C C0 B3 8D */	lis r6, 0xB38CF9B1@ha
/* 803E40FC 003DFD9C  39 03 00 06 */	addi r8, r3, 6
/* 803E4100 003DFDA0  3C A0 51 EC */	lis r5, 0x51EB851F@ha
/* 803E4104 003DFDA4  38 06 F9 B1 */	addi r0, r6, 0xB38CF9B1@l
/* 803E4108 003DFDA8  38 E7 24 93 */	addi r7, r7, 0x92492493@l
/* 803E410C 003DFDAC  7C C7 40 96 */	mulhw r6, r7, r8
/* 803E4110 003DFDB0  39 45 85 1F */	addi r10, r5, 0x51EB851F@l
/* 803E4114 003DFDB4  7C 00 18 96 */	mulhw r0, r0, r3
/* 803E4118 003DFDB8  7C A6 42 14 */	add r5, r6, r8
/* 803E411C 003DFDBC  7C A5 16 70 */	srawi r5, r5, 2
/* 803E4120 003DFDC0  54 A6 0F FE */	srwi r6, r5, 0x1f
/* 803E4124 003DFDC4  7C A5 32 14 */	add r5, r5, r6
/* 803E4128 003DFDC8  7C 00 1A 14 */	add r0, r0, r3
/* 803E412C 003DFDCC  1C C5 00 07 */	mulli r6, r5, 7
/* 803E4130 003DFDD0  7C 00 46 70 */	srawi r0, r0, 8
/* 803E4134 003DFDD4  54 05 0F FE */	srwi r5, r0, 0x1f
/* 803E4138 003DFDD8  7C A0 2A 14 */	add r5, r0, r5
/* 803E413C 003DFDDC  7C 06 40 50 */	subf r0, r6, r8
/* 803E4140 003DFDE0  1D 65 01 6D */	mulli r11, r5, 0x16d
/* 803E4144 003DFDE4  90 04 00 18 */	stw r0, 0x18(r4)
/* 803E4148 003DFDE8  48 00 00 0C */	b lbl_803E4154
lbl_803E414C:
/* 803E414C 003DFDEC  39 6B FE 93 */	addi r11, r11, -365
/* 803E4150 003DFDF0  38 A5 FF FF */	addi r5, r5, -1
lbl_803E4154:
/* 803E4154 003DFDF4  2C 05 00 01 */	cmpwi r5, 1
/* 803E4158 003DFDF8  41 80 00 3C */	blt lbl_803E4194
/* 803E415C 003DFDFC  38 C5 FF FF */	addi r6, r5, -1
/* 803E4160 003DFE00  38 05 00 03 */	addi r0, r5, 3
/* 803E4164 003DFE04  7C CA 30 96 */	mulhw r6, r10, r6
/* 803E4168 003DFE08  7C C8 3E 70 */	srawi r8, r6, 7
/* 803E416C 003DFE0C  7C C6 2E 70 */	srawi r6, r6, 5
/* 803E4170 003DFE10  54 C7 0F FE */	srwi r7, r6, 0x1f
/* 803E4174 003DFE14  7C 00 16 70 */	srawi r0, r0, 2
/* 803E4178 003DFE18  55 09 0F FE */	srwi r9, r8, 0x1f
/* 803E417C 003DFE1C  7C C6 3A 14 */	add r6, r6, r7
/* 803E4180 003DFE20  7C 00 01 94 */	addze r0, r0
/* 803E4184 003DFE24  7C E8 4A 14 */	add r7, r8, r9
/* 803E4188 003DFE28  7C 06 00 50 */	subf r0, r6, r0
/* 803E418C 003DFE2C  7C 07 02 14 */	add r0, r7, r0
/* 803E4190 003DFE30  48 00 00 08 */	b lbl_803E4198
lbl_803E4194:
/* 803E4194 003DFE34  38 00 00 00 */	li r0, 0
lbl_803E4198:
/* 803E4198 003DFE38  7D 0B 02 14 */	add r8, r11, r0
/* 803E419C 003DFE3C  7C 03 40 00 */	cmpw r3, r8
/* 803E41A0 003DFE40  41 80 FF AC */	blt lbl_803E414C
/* 803E41A4 003DFE44  54 A0 F0 02 */	slwi r0, r5, 0x1e
/* 803E41A8 003DFE48  54 A7 0F FE */	srwi r7, r5, 0x1f
/* 803E41AC 003DFE4C  7C C7 00 50 */	subf r6, r7, r0
/* 803E41B0 003DFE50  90 A4 00 14 */	stw r5, 0x14(r4)
/* 803E41B4 003DFE54  7C 08 18 50 */	subf r0, r8, r3
/* 803E41B8 003DFE58  54 C3 10 3E */	rotlwi r3, r6, 2
/* 803E41BC 003DFE5C  90 04 00 1C */	stw r0, 0x1c(r4)
/* 803E41C0 003DFE60  7C 63 3A 15 */	add. r3, r3, r7
/* 803E41C4 003DFE64  38 E0 00 00 */	li r7, 0
/* 803E41C8 003DFE68  40 82 00 28 */	bne lbl_803E41F0
/* 803E41CC 003DFE6C  3C 60 51 EC */	lis r3, 0x51EB851F@ha
/* 803E41D0 003DFE70  38 63 85 1F */	addi r3, r3, 0x51EB851F@l
/* 803E41D4 003DFE74  7C 63 28 96 */	mulhw r3, r3, r5
/* 803E41D8 003DFE78  7C 63 2E 70 */	srawi r3, r3, 5
/* 803E41DC 003DFE7C  54 66 0F FE */	srwi r6, r3, 0x1f
/* 803E41E0 003DFE80  7C 63 32 14 */	add r3, r3, r6
/* 803E41E4 003DFE84  1C 63 00 64 */	mulli r3, r3, 0x64
/* 803E41E8 003DFE88  7C 63 28 51 */	subf. r3, r3, r5
/* 803E41EC 003DFE8C  40 82 00 28 */	bne lbl_803E4214
lbl_803E41F0:
/* 803E41F0 003DFE90  3C 60 51 EC */	lis r3, 0x51EB851F@ha
/* 803E41F4 003DFE94  38 63 85 1F */	addi r3, r3, 0x51EB851F@l
/* 803E41F8 003DFE98  7C 63 28 96 */	mulhw r3, r3, r5
/* 803E41FC 003DFE9C  7C 63 3E 70 */	srawi r3, r3, 7
/* 803E4200 003DFEA0  54 66 0F FE */	srwi r6, r3, 0x1f
/* 803E4204 003DFEA4  7C 63 32 14 */	add r3, r3, r6
/* 803E4208 003DFEA8  1C 63 01 90 */	mulli r3, r3, 0x190
/* 803E420C 003DFEAC  7C 63 28 51 */	subf. r3, r3, r5
/* 803E4210 003DFEB0  40 82 00 08 */	bne lbl_803E4218
lbl_803E4214:
/* 803E4214 003DFEB4  38 E0 00 01 */	li r7, 1
lbl_803E4218:
/* 803E4218 003DFEB8  2C 07 00 00 */	cmpwi r7, 0
/* 803E421C 003DFEBC  3C C0 80 47 */	lis r6, "YearDays"@ha
/* 803E4220 003DFEC0  38 C6 77 F8 */	addi r6, r6, "YearDays"@l
/* 803E4224 003DFEC4  41 82 00 0C */	beq lbl_803E4230
/* 803E4228 003DFEC8  3C C0 80 47 */	lis r6, "LeapYearDays"@ha
/* 803E422C 003DFECC  38 C6 78 28 */	addi r6, r6, "LeapYearDays"@l
lbl_803E4230:
/* 803E4230 003DFED0  38 E0 00 0C */	li r7, 0xc
/* 803E4234 003DFED4  38 60 00 30 */	li r3, 0x30
lbl_803E4238:
/* 803E4238 003DFED8  38 63 FF FC */	addi r3, r3, -4
/* 803E423C 003DFEDC  38 E7 FF FF */	addi r7, r7, -1
/* 803E4240 003DFEE0  7C A6 18 2E */	lwzx r5, r6, r3
/* 803E4244 003DFEE4  7C 00 28 00 */	cmpw r0, r5
/* 803E4248 003DFEE8  41 80 FF F0 */	blt lbl_803E4238
/* 803E424C 003DFEEC  90 E4 00 10 */	stw r7, 0x10(r4)
/* 803E4250 003DFEF0  7C 66 18 2E */	lwzx r3, r6, r3
/* 803E4254 003DFEF4  7C 63 00 50 */	subf r3, r3, r0
/* 803E4258 003DFEF8  38 03 00 01 */	addi r0, r3, 1
/* 803E425C 003DFEFC  90 04 00 0C */	stw r0, 0xc(r4)
/* 803E4260 003DFF00  4E 80 00 20 */	blr 

.global "OSTicksToCalendarTime"
"OSTicksToCalendarTime":
/* 803E4264 003DFF04  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 803E4268 003DFF08  7C 08 02 A6 */	mflr r0
/* 803E426C 003DFF0C  90 01 00 24 */	stw r0, 0x24(r1)
/* 803E4270 003DFF10  39 61 00 20 */	addi r11, r1, 0x20
/* 803E4274 003DFF14  48 02 B0 FD */	bl "_savegpr_26"
/* 803E4278 003DFF18  3C C0 80 00 */	lis r6, 0x800000F8@ha
/* 803E427C 003DFF1C  7C BD 2B 78 */	mr r29, r5
/* 803E4280 003DFF20  80 06 00 F8 */	lwz r0, 0x800000F8@l(r6)
/* 803E4284 003DFF24  7C 7C 1B 78 */	mr r28, r3
/* 803E4288 003DFF28  7C 9B 23 78 */	mr r27, r4
/* 803E428C 003DFF2C  38 A0 00 00 */	li r5, 0
/* 803E4290 003DFF30  54 1A F0 BE */	srwi r26, r0, 2
/* 803E4294 003DFF34  7F 46 D3 78 */	mr r6, r26
/* 803E4298 003DFF38  48 02 B4 49 */	bl "__mod2i"
/* 803E429C 003DFF3C  38 E0 00 00 */	li r7, 0
/* 803E42A0 003DFF40  6C 60 80 00 */	xoris r0, r3, 0x8000
/* 803E42A4 003DFF44  6C E6 80 00 */	xoris r6, r7, 0x8000
/* 803E42A8 003DFF48  7C 9E 23 78 */	mr r30, r4
/* 803E42AC 003DFF4C  7C A7 20 10 */	subfc r5, r7, r4
/* 803E42B0 003DFF50  7C 7F 1B 78 */	mr r31, r3
/* 803E42B4 003DFF54  7C C6 01 10 */	subfe r6, r6, r0
/* 803E42B8 003DFF58  7C C0 01 10 */	subfe r6, r0, r0
/* 803E42BC 003DFF5C  7C C6 00 D1 */	neg. r6, r6
/* 803E42C0 003DFF60  41 82 00 0C */	beq lbl_803E42CC
/* 803E42C4 003DFF64  7F C4 D0 14 */	addc r30, r4, r26
/* 803E42C8 003DFF68  7F E3 39 14 */	adde r31, r3, r7
lbl_803E42CC:
/* 803E42CC 003DFF6C  3C 80 43 1C */	lis r4, 0x431BDE83@ha
/* 803E42D0 003DFF70  57 E3 18 38 */	slwi r3, r31, 3
/* 803E42D4 003DFF74  38 04 DE 83 */	addi r0, r4, 0x431BDE83@l
/* 803E42D8 003DFF78  38 A0 00 00 */	li r5, 0
/* 803E42DC 003DFF7C  7C 00 D0 16 */	mulhwu r0, r0, r26
/* 803E42E0 003DFF80  57 C4 18 38 */	slwi r4, r30, 3
/* 803E42E4 003DFF84  53 C3 1F 7E */	rlwimi r3, r30, 3, 0x1d, 0x1f
/* 803E42E8 003DFF88  54 06 8B FE */	srwi r6, r0, 0xf
/* 803E42EC 003DFF8C  48 02 B1 D9 */	bl "__div2i"
/* 803E42F0 003DFF90  38 C0 03 E8 */	li r6, 0x3e8
/* 803E42F4 003DFF94  38 A0 00 00 */	li r5, 0
/* 803E42F8 003DFF98  48 02 B3 E9 */	bl "__mod2i"
/* 803E42FC 003DFF9C  90 9D 00 24 */	stw r4, 0x24(r29)
/* 803E4300 003DFFA0  3F 40 80 00 */	lis r26, 0x800000F8@ha
/* 803E4304 003DFFA4  3C 80 10 62 */	lis r4, 0x10624DD3@ha
/* 803E4308 003DFFA8  7F E3 FB 78 */	mr r3, r31
/* 803E430C 003DFFAC  80 1A 00 F8 */	lwz r0, 0x800000F8@l(r26)
/* 803E4310 003DFFB0  38 C4 4D D3 */	addi r6, r4, 0x10624DD3@l
/* 803E4314 003DFFB4  7F C4 F3 78 */	mr r4, r30
/* 803E4318 003DFFB8  38 A0 00 00 */	li r5, 0
/* 803E431C 003DFFBC  54 00 F0 BE */	srwi r0, r0, 2
/* 803E4320 003DFFC0  7C 06 00 16 */	mulhwu r0, r6, r0
/* 803E4324 003DFFC4  54 06 D1 BE */	srwi r6, r0, 6
/* 803E4328 003DFFC8  48 02 B1 9D */	bl "__div2i"
/* 803E432C 003DFFCC  38 C0 03 E8 */	li r6, 0x3e8
/* 803E4330 003DFFD0  38 A0 00 00 */	li r5, 0
/* 803E4334 003DFFD4  48 02 B3 AD */	bl "__mod2i"
/* 803E4338 003DFFD8  90 9D 00 20 */	stw r4, 0x20(r29)
/* 803E433C 003DFFDC  7C 9E D8 10 */	subfc r4, r30, r27
/* 803E4340 003DFFE0  7C 7F E1 10 */	subfe r3, r31, r28
/* 803E4344 003DFFE4  38 A0 00 00 */	li r5, 0
/* 803E4348 003DFFE8  80 1A 00 F8 */	lwz r0, 0xf8(r26)
/* 803E434C 003DFFEC  54 06 F0 BE */	srwi r6, r0, 2
/* 803E4350 003DFFF0  48 02 B1 75 */	bl "__div2i"
/* 803E4354 003DFFF4  3F 60 00 01 */	lis r27, 0x00015180@ha
/* 803E4358 003DFFF8  7C 9C 23 78 */	mr r28, r4
/* 803E435C 003DFFFC  7C 7A 1B 78 */	mr r26, r3
/* 803E4360 003E0000  38 A0 00 00 */	li r5, 0
/* 803E4364 003E0004  38 DB 51 80 */	addi r6, r27, 0x00015180@l
/* 803E4368 003E0008  48 02 B1 5D */	bl "__div2i"
/* 803E436C 003E000C  3C 60 00 0B */	lis r3, 0x000B2575@ha
/* 803E4370 003E0010  38 DB 51 80 */	addi r6, r27, 0x5180
/* 803E4374 003E0014  38 03 25 75 */	addi r0, r3, 0x000B2575@l
/* 803E4378 003E0018  38 A0 00 00 */	li r5, 0
/* 803E437C 003E001C  7F 43 D3 78 */	mr r3, r26
/* 803E4380 003E0020  7F 44 00 14 */	addc r26, r4, r0
/* 803E4384 003E0024  7F 84 E3 78 */	mr r4, r28
/* 803E4388 003E0028  48 02 B3 59 */	bl "__mod2i"
/* 803E438C 003E002C  2C 04 00 00 */	cmpwi r4, 0
/* 803E4390 003E0030  7C 9F 23 78 */	mr r31, r4
/* 803E4394 003E0034  40 80 00 10 */	bge lbl_803E43A4
/* 803E4398 003E0038  3F E4 00 01 */	addis r31, r4, 1
/* 803E439C 003E003C  3B 5A FF FF */	addi r26, r26, -1
/* 803E43A0 003E0040  3B FF 51 80 */	addi r31, r31, 0x5180
lbl_803E43A4:
/* 803E43A4 003E0044  7F 43 D3 78 */	mr r3, r26
/* 803E43A8 003E0048  7F A4 EB 78 */	mr r4, r29
/* 803E43AC 003E004C  4B FF FD 49 */	bl "GetDates"
/* 803E43B0 003E0050  3C 60 88 89 */	lis r3, 0x88888889@ha
/* 803E43B4 003E0054  39 61 00 20 */	addi r11, r1, 0x20
/* 803E43B8 003E0058  38 A3 88 89 */	addi r5, r3, 0x88888889@l
/* 803E43BC 003E005C  7C 05 F8 96 */	mulhw r0, r5, r31
/* 803E43C0 003E0060  7C 60 FA 14 */	add r3, r0, r31
/* 803E43C4 003E0064  7C 60 2E 70 */	srawi r0, r3, 5
/* 803E43C8 003E0068  54 04 0F FE */	srwi r4, r0, 0x1f
/* 803E43CC 003E006C  7D 00 22 14 */	add r8, r0, r4
/* 803E43D0 003E0070  7C 05 40 96 */	mulhw r0, r5, r8
/* 803E43D4 003E0074  7C 00 42 14 */	add r0, r0, r8
/* 803E43D8 003E0078  7C 06 2E 70 */	srawi r6, r0, 5
/* 803E43DC 003E007C  7C 04 2E 70 */	srawi r4, r0, 5
/* 803E43E0 003E0080  7C 60 2E 70 */	srawi r0, r3, 5
/* 803E43E4 003E0084  54 C7 0F FE */	srwi r7, r6, 0x1f
/* 803E43E8 003E0088  54 85 0F FE */	srwi r5, r4, 0x1f
/* 803E43EC 003E008C  54 03 0F FE */	srwi r3, r0, 0x1f
/* 803E43F0 003E0090  7C C6 3A 14 */	add r6, r6, r7
/* 803E43F4 003E0094  7C 00 1A 14 */	add r0, r0, r3
/* 803E43F8 003E0098  7C 84 2A 14 */	add r4, r4, r5
/* 803E43FC 003E009C  1C 64 00 3C */	mulli r3, r4, 0x3c
/* 803E4400 003E00A0  90 DD 00 08 */	stw r6, 8(r29)
/* 803E4404 003E00A4  1C 00 00 3C */	mulli r0, r0, 0x3c
/* 803E4408 003E00A8  7C 63 40 50 */	subf r3, r3, r8
/* 803E440C 003E00AC  90 7D 00 04 */	stw r3, 4(r29)
/* 803E4410 003E00B0  7C 00 F8 50 */	subf r0, r0, r31
/* 803E4414 003E00B4  90 1D 00 00 */	stw r0, 0(r29)
/* 803E4418 003E00B8  48 02 AF A5 */	bl "_restgpr_26"
/* 803E441C 003E00BC  80 01 00 24 */	lwz r0, 0x24(r1)
/* 803E4420 003E00C0  7C 08 03 A6 */	mtlr r0
/* 803E4424 003E00C4  38 21 00 20 */	addi r1, r1, 0x20
/* 803E4428 003E00C8  4E 80 00 20 */	blr 
