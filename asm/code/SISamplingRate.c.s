.include "macros.inc"

.section .text, "ax"  # 0x80006940 - 0x80418B80
.global "SISetSamplingRate"
"SISetSamplingRate":
/* 803EAC48 003E68E8  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 803EAC4C 003E68EC  7C 08 02 A6 */	mflr r0
/* 803EAC50 003E68F0  28 03 00 0B */	cmplwi r3, 0xb
/* 803EAC54 003E68F4  90 01 00 24 */	stw r0, 0x24(r1)
/* 803EAC58 003E68F8  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 803EAC5C 003E68FC  3F E0 80 48 */	lis r31, "XYNTSC"@ha
/* 803EAC60 003E6900  3B FF 3C 38 */	addi r31, r31, "XYNTSC"@l
/* 803EAC64 003E6904  93 C1 00 18 */	stw r30, 0x18(r1)
/* 803EAC68 003E6908  93 A1 00 14 */	stw r29, 0x14(r1)
/* 803EAC6C 003E690C  7C 7D 1B 78 */	mr r29, r3
/* 803EAC70 003E6910  40 81 00 08 */	ble lbl_803EAC78
/* 803EAC74 003E6914  3B A0 00 0B */	li r29, 0xb
lbl_803EAC78:
/* 803EAC78 003E6918  4B FF 57 E5 */	bl "__RAS_OSDisableInterrupts_begin"
/* 803EAC7C 003E691C  93 AD C8 40 */	stw r29, "SamplingRate"-_SDA_BASE_(r13)
/* 803EAC80 003E6920  7C 7E 1B 78 */	mr r30, r3
/* 803EAC84 003E6924  48 00 38 9D */	bl "VIGetTvFormat"
/* 803EAC88 003E6928  2C 03 00 02 */	cmpwi r3, 2
/* 803EAC8C 003E692C  41 82 00 24 */	beq lbl_803EACB0
/* 803EAC90 003E6930  40 80 00 14 */	bge lbl_803EACA4
/* 803EAC94 003E6934  2C 03 00 00 */	cmpwi r3, 0
/* 803EAC98 003E6938  41 82 00 18 */	beq lbl_803EACB0
/* 803EAC9C 003E693C  40 80 00 1C */	bge lbl_803EACB8
/* 803EACA0 003E6940  48 00 00 20 */	b lbl_803EACC0
lbl_803EACA4:
/* 803EACA4 003E6944  2C 03 00 05 */	cmpwi r3, 5
/* 803EACA8 003E6948  41 82 00 08 */	beq lbl_803EACB0
/* 803EACAC 003E694C  48 00 00 14 */	b lbl_803EACC0
lbl_803EACB0:
/* 803EACB0 003E6950  38 BF 00 00 */	addi r5, r31, 0
/* 803EACB4 003E6954  48 00 00 20 */	b lbl_803EACD4
lbl_803EACB8:
/* 803EACB8 003E6958  38 BF 00 30 */	addi r5, r31, 0x30
/* 803EACBC 003E695C  48 00 00 18 */	b lbl_803EACD4
lbl_803EACC0:
/* 803EACC0 003E6960  38 7F 00 60 */	addi r3, r31, 0x60
/* 803EACC4 003E6964  4C C6 31 82 */	crclr 6
/* 803EACC8 003E6968  4B FF 23 F1 */	bl "OSReport"
/* 803EACCC 003E696C  3B A0 00 00 */	li r29, 0
/* 803EACD0 003E6970  38 BF 00 00 */	addi r5, r31, 0
lbl_803EACD4:
/* 803EACD4 003E6974  3C 60 CC 00 */	lis r3, 0xCC00206C@ha
/* 803EACD8 003E6978  57 A0 10 3A */	slwi r0, r29, 2
/* 803EACDC 003E697C  A0 83 20 6C */	lhz r4, 0xCC00206C@l(r3)
/* 803EACE0 003E6980  7C 65 02 14 */	add r3, r5, r0
/* 803EACE4 003E6984  7C 05 02 2E */	lhzx r0, r5, r0
/* 803EACE8 003E6988  54 85 07 FE */	clrlwi r5, r4, 0x1f
/* 803EACEC 003E698C  88 83 00 02 */	lbz r4, 2(r3)
/* 803EACF0 003E6990  38 65 00 01 */	addi r3, r5, 1
/* 803EACF4 003E6994  7C 63 01 D6 */	mullw r3, r3, r0
/* 803EACF8 003E6998  4B FF F5 71 */	bl "SISetXY"
/* 803EACFC 003E699C  7F C3 F3 78 */	mr r3, r30
/* 803EAD00 003E69A0  4B FF 57 85 */	bl "OSRestoreInterrupts"
/* 803EAD04 003E69A4  80 01 00 24 */	lwz r0, 0x24(r1)
/* 803EAD08 003E69A8  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 803EAD0C 003E69AC  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 803EAD10 003E69B0  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 803EAD14 003E69B4  7C 08 03 A6 */	mtlr r0
/* 803EAD18 003E69B8  38 21 00 20 */	addi r1, r1, 0x20
/* 803EAD1C 003E69BC  4E 80 00 20 */	blr 

.global "SIRefreshSamplingRate"
"SIRefreshSamplingRate":
/* 803EAD20 003E69C0  80 6D C8 40 */	lwz r3, "SamplingRate"-_SDA_BASE_(r13)
/* 803EAD24 003E69C4  4B FF FF 24 */	b "SISetSamplingRate"

.section .data, "wa"  # 0x80420060 - 0x80488160
.global "XYNTSC"
"XYNTSC":
	.incbin "baserom.dol", 0x47FD38, 0x30
.global "XYPAL"
"XYPAL":
	.incbin "baserom.dol", 0x47FD68, 0x68

.section .sbss, "wa"  # 0x805d79c0 - 0x805d9220
.global "SamplingRate"
"SamplingRate":
	.skip 0x8
