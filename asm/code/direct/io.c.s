.include "macros.inc"

.section .text, "ax"  # 0x80006940 - 0x80418B80
.global "__fwrite"
"__fwrite":
/* 80404F8C 00400C2C  94 21 FF D0 */	stwu r1, -0x30(r1)
/* 80404F90 00400C30  7C 08 02 A6 */	mflr r0
/* 80404F94 00400C34  90 01 00 34 */	stw r0, 0x34(r1)
/* 80404F98 00400C38  BF 21 00 14 */	stmw r25, 0x14(r1)
/* 80404F9C 00400C3C  7C 9B 23 78 */	mr r27, r4
/* 80404FA0 00400C40  7C DC 33 78 */	mr r28, r6
/* 80404FA4 00400C44  7C 7A 1B 78 */	mr r26, r3
/* 80404FA8 00400C48  7C B9 2B 78 */	mr r25, r5
/* 80404FAC 00400C4C  38 80 00 00 */	li r4, 0
/* 80404FB0 00400C50  7F 83 E3 78 */	mr r3, r28
/* 80404FB4 00400C54  48 00 54 45 */	bl "fwide"
/* 80404FB8 00400C58  2C 03 00 00 */	cmpwi r3, 0
/* 80404FBC 00400C5C  40 82 00 10 */	bne lbl_80404FCC
/* 80404FC0 00400C60  7F 83 E3 78 */	mr r3, r28
/* 80404FC4 00400C64  38 80 FF FF */	li r4, -1
/* 80404FC8 00400C68  48 00 54 31 */	bl "fwide"
lbl_80404FCC:
/* 80404FCC 00400C6C  7F DB C9 D7 */	mullw. r30, r27, r25
/* 80404FD0 00400C70  41 82 00 1C */	beq lbl_80404FEC
/* 80404FD4 00400C74  88 1C 00 0A */	lbz r0, 0xa(r28)
/* 80404FD8 00400C78  2C 00 00 00 */	cmpwi r0, 0
/* 80404FDC 00400C7C  40 82 00 10 */	bne lbl_80404FEC
/* 80404FE0 00400C80  80 1C 00 04 */	lwz r0, 4(r28)
/* 80404FE4 00400C84  54 00 57 7F */	rlwinm. r0, r0, 0xa, 0x1d, 0x1f
/* 80404FE8 00400C88  40 82 00 0C */	bne lbl_80404FF4
lbl_80404FEC:
/* 80404FEC 00400C8C  38 60 00 00 */	li r3, 0
/* 80404FF0 00400C90  48 00 02 90 */	b lbl_80405280
lbl_80404FF4:
/* 80404FF4 00400C94  28 00 00 02 */	cmplwi r0, 2
/* 80404FF8 00400C98  40 82 00 08 */	bne lbl_80405000
/* 80404FFC 00400C9C  48 00 0D B1 */	bl "__stdio_atexit"
lbl_80405000:
/* 80405000 00400CA0  80 7C 00 04 */	lwz r3, 4(r28)
/* 80405004 00400CA4  3B E0 00 01 */	li r31, 1
/* 80405008 00400CA8  38 80 00 00 */	li r4, 0
/* 8040500C 00400CAC  54 60 6F FF */	rlwinm. r0, r3, 0xd, 0x1f, 0x1f
/* 80405010 00400CB0  41 82 00 10 */	beq lbl_80405020
/* 80405014 00400CB4  54 60 3F BE */	rlwinm r0, r3, 7, 0x1e, 0x1f
/* 80405018 00400CB8  28 00 00 02 */	cmplwi r0, 2
/* 8040501C 00400CBC  40 82 00 08 */	bne lbl_80405024
lbl_80405020:
/* 80405020 00400CC0  38 80 00 01 */	li r4, 1
lbl_80405024:
/* 80405024 00400CC4  2C 04 00 00 */	cmpwi r4, 0
/* 80405028 00400CC8  40 82 00 18 */	bne lbl_80405040
/* 8040502C 00400CCC  80 1C 00 04 */	lwz r0, 4(r28)
/* 80405030 00400CD0  54 00 3F BE */	rlwinm r0, r0, 7, 0x1e, 0x1f
/* 80405034 00400CD4  28 00 00 01 */	cmplwi r0, 1
/* 80405038 00400CD8  41 82 00 08 */	beq lbl_80405040
/* 8040503C 00400CDC  3B E0 00 00 */	li r31, 0
lbl_80405040:
/* 80405040 00400CE0  80 1C 00 08 */	lwz r0, 8(r28)
/* 80405044 00400CE4  54 00 1F 7F */	rlwinm. r0, r0, 3, 0x1d, 0x1f
/* 80405048 00400CE8  40 82 00 54 */	bne lbl_8040509C
/* 8040504C 00400CEC  80 7C 00 04 */	lwz r3, 4(r28)
/* 80405050 00400CF0  54 60 2F BD */	rlwinm. r0, r3, 5, 0x1e, 0x1e
/* 80405054 00400CF4  54 60 2F 7E */	rlwinm r0, r3, 5, 0x1d, 0x1f
/* 80405058 00400CF8  41 82 00 44 */	beq lbl_8040509C
/* 8040505C 00400CFC  54 00 07 7B */	rlwinm. r0, r0, 0, 0x1d, 0x1d
/* 80405060 00400D00  41 82 00 24 */	beq lbl_80405084
/* 80405064 00400D04  7F 83 E3 78 */	mr r3, r28
/* 80405068 00400D08  38 80 00 00 */	li r4, 0
/* 8040506C 00400D0C  38 A0 00 02 */	li r5, 2
/* 80405070 00400D10  48 00 05 81 */	bl "_fseek"
/* 80405074 00400D14  2C 03 00 00 */	cmpwi r3, 0
/* 80405078 00400D18  41 82 00 0C */	beq lbl_80405084
/* 8040507C 00400D1C  38 60 00 00 */	li r3, 0
/* 80405080 00400D20  48 00 02 00 */	b lbl_80405280
lbl_80405084:
/* 80405084 00400D24  80 1C 00 08 */	lwz r0, 8(r28)
/* 80405088 00400D28  38 60 00 01 */	li r3, 1
/* 8040508C 00400D2C  50 60 E8 04 */	rlwimi r0, r3, 0x1d, 0, 2
/* 80405090 00400D30  90 1C 00 08 */	stw r0, 8(r28)
/* 80405094 00400D34  7F 83 E3 78 */	mr r3, r28
/* 80405098 00400D38  4B FF FD 15 */	bl "__prep_buffer"
lbl_8040509C:
/* 8040509C 00400D3C  80 1C 00 08 */	lwz r0, 8(r28)
/* 804050A0 00400D40  54 00 1F 7E */	srwi r0, r0, 0x1d
/* 804050A4 00400D44  28 00 00 01 */	cmplwi r0, 1
/* 804050A8 00400D48  41 82 00 1C */	beq lbl_804050C4
/* 804050AC 00400D4C  38 60 00 01 */	li r3, 1
/* 804050B0 00400D50  38 00 00 00 */	li r0, 0
/* 804050B4 00400D54  98 7C 00 0A */	stb r3, 0xa(r28)
/* 804050B8 00400D58  38 60 00 00 */	li r3, 0
/* 804050BC 00400D5C  90 1C 00 28 */	stw r0, 0x28(r28)
/* 804050C0 00400D60  48 00 01 C0 */	b lbl_80405280
lbl_804050C4:
/* 804050C4 00400D64  2C 1E 00 00 */	cmpwi r30, 0
/* 804050C8 00400D68  3B A0 00 00 */	li r29, 0
/* 804050CC 00400D6C  41 82 01 28 */	beq lbl_804051F4
/* 804050D0 00400D70  80 7C 00 1C */	lwz r3, 0x1c(r28)
/* 804050D4 00400D74  80 9C 00 24 */	lwz r4, 0x24(r28)
/* 804050D8 00400D78  7C 04 18 40 */	cmplw r4, r3
/* 804050DC 00400D7C  40 82 00 0C */	bne lbl_804050E8
/* 804050E0 00400D80  2C 1F 00 00 */	cmpwi r31, 0
/* 804050E4 00400D84  41 82 01 10 */	beq lbl_804051F4
lbl_804050E8:
/* 804050E8 00400D88  80 1C 00 20 */	lwz r0, 0x20(r28)
/* 804050EC 00400D8C  7C 63 20 50 */	subf r3, r3, r4
/* 804050F0 00400D90  7C 03 00 50 */	subf r0, r3, r0
/* 804050F4 00400D94  90 1C 00 28 */	stw r0, 0x28(r28)
lbl_804050F8:
/* 804050F8 00400D98  80 BC 00 28 */	lwz r5, 0x28(r28)
/* 804050FC 00400D9C  3B 20 00 00 */	li r25, 0
/* 80405100 00400DA0  7C 05 F0 40 */	cmplw r5, r30
/* 80405104 00400DA4  90 A1 00 08 */	stw r5, 8(r1)
/* 80405108 00400DA8  40 81 00 0C */	ble lbl_80405114
/* 8040510C 00400DAC  7F C5 F3 78 */	mr r5, r30
/* 80405110 00400DB0  93 C1 00 08 */	stw r30, 8(r1)
lbl_80405114:
/* 80405114 00400DB4  80 1C 00 04 */	lwz r0, 4(r28)
/* 80405118 00400DB8  54 00 3F BE */	rlwinm r0, r0, 7, 0x1e, 0x1f
/* 8040511C 00400DBC  28 00 00 01 */	cmplwi r0, 1
/* 80405120 00400DC0  40 82 00 30 */	bne lbl_80405150
/* 80405124 00400DC4  2C 05 00 00 */	cmpwi r5, 0
/* 80405128 00400DC8  41 82 00 28 */	beq lbl_80405150
/* 8040512C 00400DCC  7F 43 D3 78 */	mr r3, r26
/* 80405130 00400DD0  38 80 00 0A */	li r4, 0xa
/* 80405134 00400DD4  48 00 08 99 */	bl "__memrchr"
/* 80405138 00400DD8  2C 03 00 00 */	cmpwi r3, 0
/* 8040513C 00400DDC  7C 79 1B 78 */	mr r25, r3
/* 80405140 00400DE0  41 82 00 10 */	beq lbl_80405150
/* 80405144 00400DE4  38 03 00 01 */	addi r0, r3, 1
/* 80405148 00400DE8  7C BA 00 50 */	subf r5, r26, r0
/* 8040514C 00400DEC  90 A1 00 08 */	stw r5, 8(r1)
lbl_80405150:
/* 80405150 00400DF0  80 A1 00 08 */	lwz r5, 8(r1)
/* 80405154 00400DF4  2C 05 00 00 */	cmpwi r5, 0
/* 80405158 00400DF8  41 82 00 38 */	beq lbl_80405190
/* 8040515C 00400DFC  80 7C 00 24 */	lwz r3, 0x24(r28)
/* 80405160 00400E00  7F 44 D3 78 */	mr r4, r26
/* 80405164 00400E04  4B BF F1 D5 */	bl "memcpy"
/* 80405168 00400E08  80 81 00 08 */	lwz r4, 8(r1)
/* 8040516C 00400E0C  80 7C 00 24 */	lwz r3, 0x24(r28)
/* 80405170 00400E10  80 1C 00 28 */	lwz r0, 0x28(r28)
/* 80405174 00400E14  7F 5A 22 14 */	add r26, r26, r4
/* 80405178 00400E18  7C 63 22 14 */	add r3, r3, r4
/* 8040517C 00400E1C  7F C4 F0 50 */	subf r30, r4, r30
/* 80405180 00400E20  90 7C 00 24 */	stw r3, 0x24(r28)
/* 80405184 00400E24  80 61 00 08 */	lwz r3, 8(r1)
/* 80405188 00400E28  7C 03 00 50 */	subf r0, r3, r0
/* 8040518C 00400E2C  90 1C 00 28 */	stw r0, 0x28(r28)
lbl_80405190:
/* 80405190 00400E30  80 1C 00 28 */	lwz r0, 0x28(r28)
/* 80405194 00400E34  2C 00 00 00 */	cmpwi r0, 0
/* 80405198 00400E38  41 82 00 18 */	beq lbl_804051B0
/* 8040519C 00400E3C  2C 19 00 00 */	cmpwi r25, 0
/* 804051A0 00400E40  40 82 00 10 */	bne lbl_804051B0
/* 804051A4 00400E44  80 1C 00 04 */	lwz r0, 4(r28)
/* 804051A8 00400E48  54 00 3F BF */	rlwinm. r0, r0, 7, 0x1e, 0x1f
/* 804051AC 00400E4C  40 82 00 30 */	bne lbl_804051DC
lbl_804051B0:
/* 804051B0 00400E50  7F 83 E3 78 */	mr r3, r28
/* 804051B4 00400E54  38 80 00 00 */	li r4, 0
/* 804051B8 00400E58  4B FF FC 1D */	bl "__flush_buffer"
/* 804051BC 00400E5C  2C 03 00 00 */	cmpwi r3, 0
/* 804051C0 00400E60  41 82 00 1C */	beq lbl_804051DC
/* 804051C4 00400E64  38 60 00 01 */	li r3, 1
/* 804051C8 00400E68  38 00 00 00 */	li r0, 0
/* 804051CC 00400E6C  98 7C 00 0A */	stb r3, 0xa(r28)
/* 804051D0 00400E70  3B C0 00 00 */	li r30, 0
/* 804051D4 00400E74  90 1C 00 28 */	stw r0, 0x28(r28)
/* 804051D8 00400E78  48 00 00 1C */	b lbl_804051F4
lbl_804051DC:
/* 804051DC 00400E7C  80 01 00 08 */	lwz r0, 8(r1)
/* 804051E0 00400E80  2C 1E 00 00 */	cmpwi r30, 0
/* 804051E4 00400E84  7F BD 02 14 */	add r29, r29, r0
/* 804051E8 00400E88  41 82 00 0C */	beq lbl_804051F4
/* 804051EC 00400E8C  2C 1F 00 00 */	cmpwi r31, 0
/* 804051F0 00400E90  40 82 FF 08 */	bne lbl_804050F8
lbl_804051F4:
/* 804051F4 00400E94  2C 1E 00 00 */	cmpwi r30, 0
/* 804051F8 00400E98  41 82 00 6C */	beq lbl_80405264
/* 804051FC 00400E9C  2C 1F 00 00 */	cmpwi r31, 0
/* 80405200 00400EA0  40 82 00 64 */	bne lbl_80405264
/* 80405204 00400EA4  83 3C 00 1C */	lwz r25, 0x1c(r28)
/* 80405208 00400EA8  7C 1A F2 14 */	add r0, r26, r30
/* 8040520C 00400EAC  83 FC 00 20 */	lwz r31, 0x20(r28)
/* 80405210 00400EB0  7F 83 E3 78 */	mr r3, r28
/* 80405214 00400EB4  93 5C 00 1C */	stw r26, 0x1c(r28)
/* 80405218 00400EB8  38 81 00 08 */	addi r4, r1, 8
/* 8040521C 00400EBC  93 DC 00 20 */	stw r30, 0x20(r28)
/* 80405220 00400EC0  90 1C 00 24 */	stw r0, 0x24(r28)
/* 80405224 00400EC4  4B FF FB B1 */	bl "__flush_buffer"
/* 80405228 00400EC8  2C 03 00 00 */	cmpwi r3, 0
/* 8040522C 00400ECC  41 82 00 18 */	beq lbl_80405244
/* 80405230 00400ED0  38 60 00 01 */	li r3, 1
/* 80405234 00400ED4  38 00 00 00 */	li r0, 0
/* 80405238 00400ED8  98 7C 00 0A */	stb r3, 0xa(r28)
/* 8040523C 00400EDC  90 1C 00 28 */	stw r0, 0x28(r28)
/* 80405240 00400EE0  48 00 00 0C */	b lbl_8040524C
lbl_80405244:
/* 80405244 00400EE4  80 01 00 08 */	lwz r0, 8(r1)
/* 80405248 00400EE8  7F BD 02 14 */	add r29, r29, r0
lbl_8040524C:
/* 8040524C 00400EEC  93 3C 00 1C */	stw r25, 0x1c(r28)
/* 80405250 00400EF0  7F 83 E3 78 */	mr r3, r28
/* 80405254 00400EF4  93 FC 00 20 */	stw r31, 0x20(r28)
/* 80405258 00400EF8  4B FF FB 55 */	bl "__prep_buffer"
/* 8040525C 00400EFC  38 00 00 00 */	li r0, 0
/* 80405260 00400F00  90 1C 00 28 */	stw r0, 0x28(r28)
lbl_80405264:
/* 80405264 00400F04  80 1C 00 04 */	lwz r0, 4(r28)
/* 80405268 00400F08  54 00 3F BE */	rlwinm r0, r0, 7, 0x1e, 0x1f
/* 8040526C 00400F0C  28 00 00 02 */	cmplwi r0, 2
/* 80405270 00400F10  41 82 00 0C */	beq lbl_8040527C
/* 80405274 00400F14  38 00 00 00 */	li r0, 0
/* 80405278 00400F18  90 1C 00 28 */	stw r0, 0x28(r28)
lbl_8040527C:
/* 8040527C 00400F1C  7C 7D DB 96 */	divwu r3, r29, r27
lbl_80405280:
/* 80405280 00400F20  BB 21 00 14 */	lmw r25, 0x14(r1)
/* 80405284 00400F24  80 01 00 34 */	lwz r0, 0x34(r1)
/* 80405288 00400F28  7C 08 03 A6 */	mtlr r0
/* 8040528C 00400F2C  38 21 00 30 */	addi r1, r1, 0x30
/* 80405290 00400F30  4E 80 00 20 */	blr 
