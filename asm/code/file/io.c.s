.include "macros.inc"

.section .text, "ax"  # 0x80006940 - 0x80418B80
.global "fclose"
"fclose":
/* 80405294 00400F34  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 80405298 00400F38  7C 08 02 A6 */	mflr r0
/* 8040529C 00400F3C  2C 03 00 00 */	cmpwi r3, 0
/* 804052A0 00400F40  90 01 00 24 */	stw r0, 0x24(r1)
/* 804052A4 00400F44  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 804052A8 00400F48  93 C1 00 18 */	stw r30, 0x18(r1)
/* 804052AC 00400F4C  93 A1 00 14 */	stw r29, 0x14(r1)
/* 804052B0 00400F50  7C 7D 1B 78 */	mr r29, r3
/* 804052B4 00400F54  40 82 00 0C */	bne lbl_804052C0
/* 804052B8 00400F58  38 60 FF FF */	li r3, -1
/* 804052BC 00400F5C  48 00 00 78 */	b lbl_80405334
lbl_804052C0:
/* 804052C0 00400F60  80 03 00 04 */	lwz r0, 4(r3)
/* 804052C4 00400F64  54 00 57 7F */	rlwinm. r0, r0, 0xa, 0x1d, 0x1f
/* 804052C8 00400F68  40 82 00 0C */	bne lbl_804052D4
/* 804052CC 00400F6C  38 60 00 00 */	li r3, 0
/* 804052D0 00400F70  48 00 00 64 */	b lbl_80405334
lbl_804052D4:
/* 804052D4 00400F74  48 00 00 7D */	bl "fflush"
/* 804052D8 00400F78  81 9D 00 44 */	lwz r12, 0x44(r29)
/* 804052DC 00400F7C  7C 7E 1B 78 */	mr r30, r3
/* 804052E0 00400F80  80 7D 00 00 */	lwz r3, 0(r29)
/* 804052E4 00400F84  7D 89 03 A6 */	mtctr r12
/* 804052E8 00400F88  4E 80 04 21 */	bctrl
/* 804052EC 00400F8C  80 1D 00 08 */	lwz r0, 8(r29)
/* 804052F0 00400F90  38 A0 00 00 */	li r5, 0
/* 804052F4 00400F94  80 9D 00 04 */	lwz r4, 4(r29)
/* 804052F8 00400F98  7C 7F 1B 78 */	mr r31, r3
/* 804052FC 00400F9C  54 00 27 FF */	rlwinm. r0, r0, 4, 0x1f, 0x1f
/* 80405300 00400FA0  90 BD 00 00 */	stw r5, 0(r29)
/* 80405304 00400FA4  54 84 02 8C */	rlwinm r4, r4, 0, 0xa, 6
/* 80405308 00400FA8  90 9D 00 04 */	stw r4, 4(r29)
/* 8040530C 00400FAC  41 82 00 0C */	beq lbl_80405318
/* 80405310 00400FB0  80 7D 00 1C */	lwz r3, 0x1c(r29)
/* 80405314 00400FB4  4B E5 58 39 */	bl "free"
lbl_80405318:
/* 80405318 00400FB8  2C 1E 00 00 */	cmpwi r30, 0
/* 8040531C 00400FBC  38 00 00 00 */	li r0, 0
/* 80405320 00400FC0  40 82 00 0C */	bne lbl_8040532C
/* 80405324 00400FC4  2C 1F 00 00 */	cmpwi r31, 0
/* 80405328 00400FC8  41 82 00 08 */	beq lbl_80405330
lbl_8040532C:
/* 8040532C 00400FCC  38 00 00 01 */	li r0, 1
lbl_80405330:
/* 80405330 00400FD0  7C 60 00 D0 */	neg r3, r0
lbl_80405334:
/* 80405334 00400FD4  80 01 00 24 */	lwz r0, 0x24(r1)
/* 80405338 00400FD8  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 8040533C 00400FDC  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 80405340 00400FE0  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 80405344 00400FE4  7C 08 03 A6 */	mtlr r0
/* 80405348 00400FE8  38 21 00 20 */	addi r1, r1, 0x20
/* 8040534C 00400FEC  4E 80 00 20 */	blr

.global "fflush"
"fflush":
/* 80405350 00400FF0  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 80405354 00400FF4  7C 08 02 A6 */	mflr r0
/* 80405358 00400FF8  2C 03 00 00 */	cmpwi r3, 0
/* 8040535C 00400FFC  90 01 00 14 */	stw r0, 0x14(r1)
/* 80405360 00401000  93 E1 00 0C */	stw r31, 0xc(r1)
/* 80405364 00401004  7C 7F 1B 78 */	mr r31, r3
/* 80405368 00401008  93 C1 00 08 */	stw r30, 8(r1)
/* 8040536C 0040100C  40 82 00 0C */	bne lbl_80405378
/* 80405370 00401010  4B FF DF 61 */	bl "__flush_all"
/* 80405374 00401014  48 00 00 F8 */	b lbl_8040546C
lbl_80405378:
/* 80405378 00401018  88 03 00 0A */	lbz r0, 0xa(r3)
/* 8040537C 0040101C  2C 00 00 00 */	cmpwi r0, 0
/* 80405380 00401020  40 82 00 10 */	bne lbl_80405390
/* 80405384 00401024  80 83 00 04 */	lwz r4, 4(r3)
/* 80405388 00401028  54 80 57 7F */	rlwinm. r0, r4, 0xa, 0x1d, 0x1f
/* 8040538C 0040102C  40 82 00 0C */	bne lbl_80405398
lbl_80405390:
/* 80405390 00401030  38 60 FF FF */	li r3, -1
/* 80405394 00401034  48 00 00 D8 */	b lbl_8040546C
lbl_80405398:
/* 80405398 00401038  54 80 2F 7E */	rlwinm r0, r4, 5, 0x1d, 0x1f
/* 8040539C 0040103C  28 00 00 01 */	cmplwi r0, 1
/* 804053A0 00401040  40 82 00 0C */	bne lbl_804053AC
/* 804053A4 00401044  38 60 00 00 */	li r3, 0
/* 804053A8 00401048  48 00 00 C4 */	b lbl_8040546C
lbl_804053AC:
/* 804053AC 0040104C  80 83 00 08 */	lwz r4, 8(r3)
/* 804053B0 00401050  54 80 1F 7E */	srwi r0, r4, 0x1d
/* 804053B4 00401054  28 00 00 03 */	cmplwi r0, 3
/* 804053B8 00401058  41 80 00 10 */	blt lbl_804053C8
/* 804053BC 0040105C  38 00 00 02 */	li r0, 2
/* 804053C0 00401060  50 04 E8 04 */	rlwimi r4, r0, 0x1d, 0, 2
/* 804053C4 00401064  90 83 00 08 */	stw r4, 8(r3)
lbl_804053C8:
/* 804053C8 00401068  80 03 00 08 */	lwz r0, 8(r3)
/* 804053CC 0040106C  54 00 1F 7E */	srwi r0, r0, 0x1d
/* 804053D0 00401070  28 00 00 02 */	cmplwi r0, 2
/* 804053D4 00401074  40 82 00 0C */	bne lbl_804053E0
/* 804053D8 00401078  38 00 00 00 */	li r0, 0
/* 804053DC 0040107C  90 03 00 28 */	stw r0, 0x28(r3)
lbl_804053E0:
/* 804053E0 00401080  80 83 00 08 */	lwz r4, 8(r3)
/* 804053E4 00401084  54 80 1F 7E */	srwi r0, r4, 0x1d
/* 804053E8 00401088  28 00 00 01 */	cmplwi r0, 1
/* 804053EC 0040108C  41 82 00 14 */	beq lbl_80405400
/* 804053F0 00401090  54 80 00 FE */	clrlwi r0, r4, 3
/* 804053F4 00401094  90 03 00 08 */	stw r0, 8(r3)
/* 804053F8 00401098  38 60 00 00 */	li r3, 0
/* 804053FC 0040109C  48 00 00 70 */	b lbl_8040546C
lbl_80405400:
/* 80405400 004010A0  80 03 00 04 */	lwz r0, 4(r3)
/* 80405404 004010A4  54 00 57 7E */	rlwinm r0, r0, 0xa, 0x1d, 0x1f
/* 80405408 004010A8  28 00 00 01 */	cmplwi r0, 1
/* 8040540C 004010AC  41 82 00 0C */	beq lbl_80405418
/* 80405410 004010B0  3B C0 00 00 */	li r30, 0
/* 80405414 004010B4  48 00 00 10 */	b lbl_80405424
lbl_80405418:
/* 80405418 004010B8  7F E3 FB 78 */	mr r3, r31
/* 8040541C 004010BC  48 00 01 D1 */	bl "ftell"
/* 80405420 004010C0  7C 7E 1B 78 */	mr r30, r3
lbl_80405424:
/* 80405424 004010C4  7F E3 FB 78 */	mr r3, r31
/* 80405428 004010C8  38 80 00 00 */	li r4, 0
/* 8040542C 004010CC  4B FF F9 A9 */	bl "__flush_buffer"
/* 80405430 004010D0  2C 03 00 00 */	cmpwi r3, 0
/* 80405434 004010D4  41 82 00 1C */	beq lbl_80405450
/* 80405438 004010D8  38 60 00 01 */	li r3, 1
/* 8040543C 004010DC  38 00 00 00 */	li r0, 0
/* 80405440 004010E0  98 7F 00 0A */	stb r3, 0xa(r31)
/* 80405444 004010E4  38 60 FF FF */	li r3, -1
/* 80405448 004010E8  90 1F 00 28 */	stw r0, 0x28(r31)
/* 8040544C 004010EC  48 00 00 20 */	b lbl_8040546C
lbl_80405450:
/* 80405450 004010F0  80 1F 00 08 */	lwz r0, 8(r31)
/* 80405454 004010F4  38 80 00 00 */	li r4, 0
/* 80405458 004010F8  93 DF 00 18 */	stw r30, 0x18(r31)
/* 8040545C 004010FC  38 60 00 00 */	li r3, 0
/* 80405460 00401100  54 00 00 FE */	clrlwi r0, r0, 3
/* 80405464 00401104  90 1F 00 08 */	stw r0, 8(r31)
/* 80405468 00401108  90 9F 00 28 */	stw r4, 0x28(r31)
lbl_8040546C:
/* 8040546C 0040110C  80 01 00 14 */	lwz r0, 0x14(r1)
/* 80405470 00401110  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 80405474 00401114  83 C1 00 08 */	lwz r30, 8(r1)
/* 80405478 00401118  7C 08 03 A6 */	mtlr r0
/* 8040547C 0040111C  38 21 00 10 */	addi r1, r1, 0x10
/* 80405480 00401120  4E 80 00 20 */	blr

.global "__msl_strnicmp"
"__msl_strnicmp":
/* 80405484 00401124  3C C0 80 48 */	lis r6, "_current_locale"@ha
/* 80405488 00401128  38 C6 7C E0 */	addi r6, r6, "_current_locale"@l
/* 8040548C 0040112C  80 C6 00 38 */	lwz r6, 0x38(r6)
/* 80405490 00401130  7C A9 03 A6 */	mtctr r5
/* 80405494 00401134  2C 05 00 00 */	cmpwi r5, 0
/* 80405498 00401138  40 81 00 A4 */	ble lbl_8040553C
lbl_8040549C:
/* 8040549C 0040113C  88 A3 00 00 */	lbz r5, 0(r3)
/* 804054A0 00401140  38 00 00 00 */	li r0, 0
/* 804054A4 00401144  38 63 00 01 */	addi r3, r3, 1
/* 804054A8 00401148  7C A7 07 75 */	extsb. r7, r5
/* 804054AC 0040114C  41 80 00 0C */	blt lbl_804054B8
/* 804054B0 00401150  2C 07 01 00 */	cmpwi r7, 0x100
/* 804054B4 00401154  41 80 00 08 */	blt lbl_804054BC
lbl_804054B8:
/* 804054B8 00401158  38 00 00 01 */	li r0, 1
lbl_804054BC:
/* 804054BC 0040115C  2C 00 00 00 */	cmpwi r0, 0
/* 804054C0 00401160  41 82 00 08 */	beq lbl_804054C8
/* 804054C4 00401164  48 00 00 0C */	b lbl_804054D0
lbl_804054C8:
/* 804054C8 00401168  80 A6 00 10 */	lwz r5, 0x10(r6)
/* 804054CC 0040116C  7C E5 38 AE */	lbzx r7, r5, r7
lbl_804054D0:
/* 804054D0 00401170  88 A4 00 00 */	lbz r5, 0(r4)
/* 804054D4 00401174  7C E8 07 74 */	extsb r8, r7
/* 804054D8 00401178  38 00 00 00 */	li r0, 0
/* 804054DC 0040117C  38 84 00 01 */	addi r4, r4, 1
/* 804054E0 00401180  7C A7 07 75 */	extsb. r7, r5
/* 804054E4 00401184  41 80 00 0C */	blt lbl_804054F0
/* 804054E8 00401188  2C 07 01 00 */	cmpwi r7, 0x100
/* 804054EC 0040118C  41 80 00 08 */	blt lbl_804054F4
lbl_804054F0:
/* 804054F0 00401190  38 00 00 01 */	li r0, 1
lbl_804054F4:
/* 804054F4 00401194  2C 00 00 00 */	cmpwi r0, 0
/* 804054F8 00401198  41 82 00 08 */	beq lbl_80405500
/* 804054FC 0040119C  48 00 00 0C */	b lbl_80405508
lbl_80405500:
/* 80405500 004011A0  80 A6 00 10 */	lwz r5, 0x10(r6)
/* 80405504 004011A4  7C E5 38 AE */	lbzx r7, r5, r7
lbl_80405508:
/* 80405508 004011A8  7C E0 07 74 */	extsb r0, r7
/* 8040550C 004011AC  7C 08 00 00 */	cmpw r8, r0
/* 80405510 004011B0  40 80 00 0C */	bge lbl_8040551C
/* 80405514 004011B4  38 60 FF FF */	li r3, -1
/* 80405518 004011B8  4E 80 00 20 */	blr
lbl_8040551C:
/* 8040551C 004011BC  40 81 00 0C */	ble lbl_80405528
/* 80405520 004011C0  38 60 00 01 */	li r3, 1
/* 80405524 004011C4  4E 80 00 20 */	blr
lbl_80405528:
/* 80405528 004011C8  2C 08 00 00 */	cmpwi r8, 0
/* 8040552C 004011CC  40 82 00 0C */	bne lbl_80405538
/* 80405530 004011D0  38 60 00 00 */	li r3, 0
/* 80405534 004011D4  4E 80 00 20 */	blr
lbl_80405538:
/* 80405538 004011D8  42 00 FF 64 */	bdnz lbl_8040549C
lbl_8040553C:
/* 8040553C 004011DC  38 60 00 00 */	li r3, 0
/* 80405540 004011E0  4E 80 00 20 */	blr
