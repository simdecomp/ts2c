.include "macros.inc"

.section .text, "ax"  # 0x80006940 - 0x80418B80
.global "modf"
"modf":
/* 8040E77C 0040A41C  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8040E780 0040A420  D8 21 00 08 */	stfd f1, 8(r1)
/* 8040E784 0040A424  80 A1 00 08 */	lwz r5, 8(r1)
/* 8040E788 0040A428  80 C1 00 0C */	lwz r6, 0xc(r1)
/* 8040E78C 0040A42C  54 A4 65 7E */	rlwinm r4, r5, 0xc, 0x15, 0x1f
/* 8040E790 0040A430  38 E4 FC 01 */	addi r7, r4, -1023
/* 8040E794 0040A434  2C 07 00 14 */	cmpwi r7, 0x14
/* 8040E798 0040A438  40 80 00 70 */	bge lbl_8040E808
/* 8040E79C 0040A43C  2C 07 00 00 */	cmpwi r7, 0
/* 8040E7A0 0040A440  40 80 00 18 */	bge lbl_8040E7B8
/* 8040E7A4 0040A444  54 A4 00 00 */	rlwinm r4, r5, 0, 0, 0
/* 8040E7A8 0040A448  38 00 00 00 */	li r0, 0
/* 8040E7AC 0040A44C  90 83 00 00 */	stw r4, 0(r3)
/* 8040E7B0 0040A450  90 03 00 04 */	stw r0, 4(r3)
/* 8040E7B4 0040A454  48 00 00 BC */	b lbl_8040E870
lbl_8040E7B8:
/* 8040E7B8 0040A458  3C 80 00 10 */	lis r4, 0x000FFFFF@ha
/* 8040E7BC 0040A45C  38 04 FF FF */	addi r0, r4, 0x000FFFFF@l
/* 8040E7C0 0040A460  7C 04 3E 30 */	sraw r4, r0, r7
/* 8040E7C4 0040A464  7C A0 20 38 */	and r0, r5, r4
/* 8040E7C8 0040A468  7C C0 03 79 */	or. r0, r6, r0
/* 8040E7CC 0040A46C  40 82 00 20 */	bne lbl_8040E7EC
/* 8040E7D0 0040A470  54 A4 00 00 */	rlwinm r4, r5, 0, 0, 0
/* 8040E7D4 0040A474  38 00 00 00 */	li r0, 0
/* 8040E7D8 0040A478  90 81 00 08 */	stw r4, 8(r1)
/* 8040E7DC 0040A47C  90 01 00 0C */	stw r0, 0xc(r1)
/* 8040E7E0 0040A480  D8 23 00 00 */	stfd f1, 0(r3)
/* 8040E7E4 0040A484  C8 21 00 08 */	lfd f1, 8(r1)
/* 8040E7E8 0040A488  48 00 00 88 */	b lbl_8040E870
lbl_8040E7EC:
/* 8040E7EC 0040A48C  7C A4 20 78 */	andc r4, r5, r4
/* 8040E7F0 0040A490  38 00 00 00 */	li r0, 0
/* 8040E7F4 0040A494  90 83 00 00 */	stw r4, 0(r3)
/* 8040E7F8 0040A498  90 03 00 04 */	stw r0, 4(r3)
/* 8040E7FC 0040A49C  C8 03 00 00 */	lfd f0, 0(r3)
/* 8040E800 0040A4A0  FC 21 00 28 */	fsub f1, f1, f0
/* 8040E804 0040A4A4  48 00 00 6C */	b lbl_8040E870
lbl_8040E808:
/* 8040E808 0040A4A8  2C 07 00 33 */	cmpwi r7, 0x33
/* 8040E80C 0040A4AC  40 81 00 20 */	ble lbl_8040E82C
/* 8040E810 0040A4B0  54 A4 00 00 */	rlwinm r4, r5, 0, 0, 0
/* 8040E814 0040A4B4  38 00 00 00 */	li r0, 0
/* 8040E818 0040A4B8  90 81 00 08 */	stw r4, 8(r1)
/* 8040E81C 0040A4BC  90 01 00 0C */	stw r0, 0xc(r1)
/* 8040E820 0040A4C0  D8 23 00 00 */	stfd f1, 0(r3)
/* 8040E824 0040A4C4  C8 21 00 08 */	lfd f1, 8(r1)
/* 8040E828 0040A4C8  48 00 00 48 */	b lbl_8040E870
lbl_8040E82C:
/* 8040E82C 0040A4CC  38 07 FF EC */	addi r0, r7, -20
/* 8040E830 0040A4D0  38 80 FF FF */	li r4, -1
/* 8040E834 0040A4D4  7C 84 04 30 */	srw r4, r4, r0
/* 8040E838 0040A4D8  7C C0 20 39 */	and. r0, r6, r4
/* 8040E83C 0040A4DC  40 82 00 20 */	bne lbl_8040E85C
/* 8040E840 0040A4E0  54 A4 00 00 */	rlwinm r4, r5, 0, 0, 0
/* 8040E844 0040A4E4  38 00 00 00 */	li r0, 0
/* 8040E848 0040A4E8  90 81 00 08 */	stw r4, 8(r1)
/* 8040E84C 0040A4EC  90 01 00 0C */	stw r0, 0xc(r1)
/* 8040E850 0040A4F0  D8 23 00 00 */	stfd f1, 0(r3)
/* 8040E854 0040A4F4  C8 21 00 08 */	lfd f1, 8(r1)
/* 8040E858 0040A4F8  48 00 00 18 */	b lbl_8040E870
lbl_8040E85C:
/* 8040E85C 0040A4FC  7C C0 20 78 */	andc r0, r6, r4
/* 8040E860 0040A500  90 A3 00 00 */	stw r5, 0(r3)
/* 8040E864 0040A504  90 03 00 04 */	stw r0, 4(r3)
/* 8040E868 0040A508  C8 03 00 00 */	lfd f0, 0(r3)
/* 8040E86C 0040A50C  FC 21 00 28 */	fsub f1, f1, f0
lbl_8040E870:
/* 8040E870 0040A510  38 21 00 10 */	addi r1, r1, 0x10
/* 8040E874 0040A514  4E 80 00 20 */	blr
