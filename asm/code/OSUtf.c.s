.include "macros.inc"

.section .text, "ax"  # 0x80006940 - 0x80418B80
.global "OSUTF8to32"
"OSUTF8to32":
/* 803E442C 003E00CC  88 C3 00 00 */	lbz r6, 0(r3)
/* 803E4430 003E00D0  2C 06 00 00 */	cmpwi r6, 0
/* 803E4434 003E00D4  41 82 00 08 */	beq lbl_803E443C
/* 803E4438 003E00D8  38 63 00 01 */	addi r3, r3, 1
lbl_803E443C:
/* 803E443C 003E00DC  54 C0 06 31 */	rlwinm. r0, r6, 0, 0x18, 0x18
/* 803E4440 003E00E0  40 82 00 0C */	bne lbl_803E444C
/* 803E4444 003E00E4  38 E0 00 00 */	li r7, 0
/* 803E4448 003E00E8  48 00 00 54 */	b lbl_803E449C
lbl_803E444C:
/* 803E444C 003E00EC  54 C0 06 34 */	rlwinm r0, r6, 0, 0x18, 0x1a
/* 803E4450 003E00F0  28 00 00 C0 */	cmplwi r0, 0xc0
/* 803E4454 003E00F4  40 82 00 10 */	bne lbl_803E4464
/* 803E4458 003E00F8  54 C6 06 FE */	clrlwi r6, r6, 0x1b
/* 803E445C 003E00FC  38 E0 00 01 */	li r7, 1
/* 803E4460 003E0100  48 00 00 3C */	b lbl_803E449C
lbl_803E4464:
/* 803E4464 003E0104  54 C0 06 36 */	rlwinm r0, r6, 0, 0x18, 0x1b
/* 803E4468 003E0108  28 00 00 E0 */	cmplwi r0, 0xe0
/* 803E446C 003E010C  40 82 00 10 */	bne lbl_803E447C
/* 803E4470 003E0110  54 C6 07 3E */	clrlwi r6, r6, 0x1c
/* 803E4474 003E0114  38 E0 00 02 */	li r7, 2
/* 803E4478 003E0118  48 00 00 24 */	b lbl_803E449C
lbl_803E447C:
/* 803E447C 003E011C  54 C0 06 38 */	rlwinm r0, r6, 0, 0x18, 0x1c
/* 803E4480 003E0120  28 00 00 F0 */	cmplwi r0, 0xf0
/* 803E4484 003E0124  40 82 00 10 */	bne lbl_803E4494
/* 803E4488 003E0128  54 C6 07 7E */	clrlwi r6, r6, 0x1d
/* 803E448C 003E012C  38 E0 00 03 */	li r7, 3
/* 803E4490 003E0130  48 00 00 0C */	b lbl_803E449C
lbl_803E4494:
/* 803E4494 003E0134  38 60 00 00 */	li r3, 0
/* 803E4498 003E0138  4E 80 00 20 */	blr 
lbl_803E449C:
/* 803E449C 003E013C  7C E9 03 A6 */	mtctr r7
/* 803E44A0 003E0140  28 07 00 00 */	cmplwi r7, 0
/* 803E44A4 003E0144  40 81 00 30 */	ble lbl_803E44D4
lbl_803E44A8:
/* 803E44A8 003E0148  88 A3 00 00 */	lbz r5, 0(r3)
/* 803E44AC 003E014C  54 C6 30 32 */	slwi r6, r6, 6
/* 803E44B0 003E0150  38 63 00 01 */	addi r3, r3, 1
/* 803E44B4 003E0154  54 A0 06 32 */	rlwinm r0, r5, 0, 0x18, 0x19
/* 803E44B8 003E0158  28 00 00 80 */	cmplwi r0, 0x80
/* 803E44BC 003E015C  41 82 00 0C */	beq lbl_803E44C8
/* 803E44C0 003E0160  38 60 00 00 */	li r3, 0
/* 803E44C4 003E0164  4E 80 00 20 */	blr 
lbl_803E44C8:
/* 803E44C8 003E0168  54 A0 06 BE */	clrlwi r0, r5, 0x1a
/* 803E44CC 003E016C  7C C6 03 78 */	or r6, r6, r0
/* 803E44D0 003E0170  42 00 FF D8 */	bdnz lbl_803E44A8
lbl_803E44D4:
/* 803E44D4 003E0174  28 06 00 7F */	cmplwi r6, 0x7f
/* 803E44D8 003E0178  41 81 00 14 */	bgt lbl_803E44EC
/* 803E44DC 003E017C  2C 07 00 00 */	cmpwi r7, 0
/* 803E44E0 003E0180  41 82 00 3C */	beq lbl_803E451C
/* 803E44E4 003E0184  38 60 00 00 */	li r3, 0
/* 803E44E8 003E0188  4E 80 00 20 */	blr 
lbl_803E44EC:
/* 803E44EC 003E018C  28 06 07 FF */	cmplwi r6, 0x7ff
/* 803E44F0 003E0190  41 81 00 14 */	bgt lbl_803E4504
/* 803E44F4 003E0194  28 07 00 01 */	cmplwi r7, 1
/* 803E44F8 003E0198  41 82 00 24 */	beq lbl_803E451C
/* 803E44FC 003E019C  38 60 00 00 */	li r3, 0
/* 803E4500 003E01A0  4E 80 00 20 */	blr 
lbl_803E4504:
/* 803E4504 003E01A4  28 06 FF FF */	cmplwi r6, 0xffff
/* 803E4508 003E01A8  41 81 00 14 */	bgt lbl_803E451C
/* 803E450C 003E01AC  28 07 00 02 */	cmplwi r7, 2
/* 803E4510 003E01B0  41 82 00 0C */	beq lbl_803E451C
/* 803E4514 003E01B4  38 60 00 00 */	li r3, 0
/* 803E4518 003E01B8  4E 80 00 20 */	blr 
lbl_803E451C:
/* 803E451C 003E01BC  28 06 D8 00 */	cmplwi r6, 0xd800
/* 803E4520 003E01C0  41 80 00 14 */	blt lbl_803E4534
/* 803E4524 003E01C4  28 06 DF FF */	cmplwi r6, 0xdfff
/* 803E4528 003E01C8  41 81 00 0C */	bgt lbl_803E4534
/* 803E452C 003E01CC  38 60 00 00 */	li r3, 0
/* 803E4530 003E01D0  4E 80 00 20 */	blr 
lbl_803E4534:
/* 803E4534 003E01D4  90 C4 00 00 */	stw r6, 0(r4)
/* 803E4538 003E01D8  4E 80 00 20 */	blr 

.global "OSUTF16to32"
"OSUTF16to32":
/* 803E453C 003E01DC  A0 A3 00 00 */	lhz r5, 0(r3)
/* 803E4540 003E01E0  2C 05 00 00 */	cmpwi r5, 0
/* 803E4544 003E01E4  41 82 00 08 */	beq lbl_803E454C
/* 803E4548 003E01E8  38 63 00 02 */	addi r3, r3, 2
lbl_803E454C:
/* 803E454C 003E01EC  28 05 D8 00 */	cmplwi r5, 0xd800
/* 803E4550 003E01F0  41 80 00 0C */	blt lbl_803E455C
/* 803E4554 003E01F4  28 05 DF FF */	cmplwi r5, 0xdfff
/* 803E4558 003E01F8  40 81 00 0C */	ble lbl_803E4564
lbl_803E455C:
/* 803E455C 003E01FC  7C A6 2B 78 */	mr r6, r5
/* 803E4560 003E0200  48 00 00 44 */	b lbl_803E45A4
lbl_803E4564:
/* 803E4564 003E0204  28 05 DB FF */	cmplwi r5, 0xdbff
/* 803E4568 003E0208  41 81 00 34 */	bgt lbl_803E459C
/* 803E456C 003E020C  A0 03 00 00 */	lhz r0, 0(r3)
/* 803E4570 003E0210  38 63 00 02 */	addi r3, r3, 2
/* 803E4574 003E0214  28 00 DC 00 */	cmplwi r0, 0xdc00
/* 803E4578 003E0218  41 80 00 1C */	blt lbl_803E4594
/* 803E457C 003E021C  28 00 DF FF */	cmplwi r0, 0xdfff
/* 803E4580 003E0220  41 81 00 14 */	bgt lbl_803E4594
/* 803E4584 003E0224  54 06 05 BE */	clrlwi r6, r0, 0x16
/* 803E4588 003E0228  50 A6 53 2A */	rlwimi r6, r5, 0xa, 0xc, 0x15
/* 803E458C 003E022C  3C C6 00 01 */	addis r6, r6, 1
/* 803E4590 003E0230  48 00 00 14 */	b lbl_803E45A4
lbl_803E4594:
/* 803E4594 003E0234  38 60 00 00 */	li r3, 0
/* 803E4598 003E0238  4E 80 00 20 */	blr 
lbl_803E459C:
/* 803E459C 003E023C  38 60 00 00 */	li r3, 0
/* 803E45A0 003E0240  4E 80 00 20 */	blr 
lbl_803E45A4:
/* 803E45A4 003E0244  90 C4 00 00 */	stw r6, 0(r4)
/* 803E45A8 003E0248  4E 80 00 20 */	blr 

.global "OSUTF32toANSI"
"OSUTF32toANSI":
/* 803E45AC 003E024C  28 03 00 FF */	cmplwi r3, 0xff
/* 803E45B0 003E0250  40 81 00 0C */	ble lbl_803E45BC
/* 803E45B4 003E0254  38 60 00 00 */	li r3, 0
/* 803E45B8 003E0258  4E 80 00 20 */	blr 
lbl_803E45BC:
/* 803E45BC 003E025C  28 03 00 80 */	cmplwi r3, 0x80
/* 803E45C0 003E0260  41 80 00 0C */	blt lbl_803E45CC
/* 803E45C4 003E0264  28 03 00 9F */	cmplwi r3, 0x9f
/* 803E45C8 003E0268  40 81 00 0C */	ble lbl_803E45D4
lbl_803E45CC:
/* 803E45CC 003E026C  54 63 06 3E */	clrlwi r3, r3, 0x18
/* 803E45D0 003E0270  4E 80 00 20 */	blr 
lbl_803E45D4:
/* 803E45D4 003E0274  28 03 01 52 */	cmplwi r3, 0x152
/* 803E45D8 003E0278  41 80 00 44 */	blt lbl_803E461C
/* 803E45DC 003E027C  28 03 21 22 */	cmplwi r3, 0x2122
/* 803E45E0 003E0280  41 81 00 3C */	bgt lbl_803E461C
/* 803E45E4 003E0284  3C 80 80 47 */	lis r4, "UcsAnsiTable"@ha
/* 803E45E8 003E0288  38 00 00 20 */	li r0, 0x20
/* 803E45EC 003E028C  38 84 78 58 */	addi r4, r4, "UcsAnsiTable"@l
/* 803E45F0 003E0290  38 A0 00 00 */	li r5, 0
/* 803E45F4 003E0294  7C 09 03 A6 */	mtctr r0
lbl_803E45F8:
/* 803E45F8 003E0298  A0 04 00 00 */	lhz r0, 0(r4)
/* 803E45FC 003E029C  7C 03 00 40 */	cmplw r3, r0
/* 803E4600 003E02A0  40 82 00 10 */	bne lbl_803E4610
/* 803E4604 003E02A4  38 05 00 80 */	addi r0, r5, 0x80
/* 803E4608 003E02A8  54 03 06 3E */	clrlwi r3, r0, 0x18
/* 803E460C 003E02AC  4E 80 00 20 */	blr 
lbl_803E4610:
/* 803E4610 003E02B0  38 84 00 02 */	addi r4, r4, 2
/* 803E4614 003E02B4  38 A5 00 01 */	addi r5, r5, 1
/* 803E4618 003E02B8  42 00 FF E0 */	bdnz lbl_803E45F8
lbl_803E461C:
/* 803E461C 003E02BC  38 60 00 00 */	li r3, 0
/* 803E4620 003E02C0  4E 80 00 20 */	blr 

.global "OSUTF32toSJIS"
"OSUTF32toSJIS":
/* 803E4624 003E02C4  3C 00 00 01 */	lis r0, 1
/* 803E4628 003E02C8  7C 03 00 40 */	cmplw r3, r0
/* 803E462C 003E02CC  41 80 00 0C */	blt lbl_803E4638
/* 803E4630 003E02D0  38 60 00 00 */	li r3, 0
/* 803E4634 003E02D4  4E 80 00 20 */	blr 
lbl_803E4638:
/* 803E4638 003E02D8  3C 80 80 48 */	lis r4, "UcsSjisTable"@ha
/* 803E463C 003E02DC  54 60 D5 BA */	rlwinm r0, r3, 0x1a, 0x16, 0x1d
/* 803E4640 003E02E0  38 84 32 98 */	addi r4, r4, "UcsSjisTable"@l
/* 803E4644 003E02E4  7C 84 00 2E */	lwzx r4, r4, r0
/* 803E4648 003E02E8  2C 04 00 00 */	cmpwi r4, 0
/* 803E464C 003E02EC  41 82 00 10 */	beq lbl_803E465C
/* 803E4650 003E02F0  54 60 0D FC */	rlwinm r0, r3, 1, 0x17, 0x1e
/* 803E4654 003E02F4  7C 64 02 2E */	lhzx r3, r4, r0
/* 803E4658 003E02F8  4E 80 00 20 */	blr 
lbl_803E465C:
/* 803E465C 003E02FC  38 60 00 00 */	li r3, 0
/* 803E4660 003E0300  4E 80 00 20 */	blr 
