.include "macros.inc"

.section .text, "ax"  # 0x80006940 - 0x80418B80
.global "__DBMtrHandler"
"__DBMtrHandler":
/* 8040276C 003FE40C  81 8D C9 98 */	lwz r12, "__DBMtrCallback"-_SDA_BASE_(r13)
/* 80402770 003FE410  38 00 00 01 */	li r0, 1
/* 80402774 003FE414  98 0D C9 A0 */	stb r0, "__DBEXIInputFlag"-_SDA_BASE_(r13)
/* 80402778 003FE418  2C 0C 00 00 */	cmpwi r12, 0
/* 8040277C 003FE41C  4D 82 00 20 */	beqlr 
/* 80402780 003FE420  38 60 00 00 */	li r3, 0
/* 80402784 003FE424  7D 89 03 A6 */	mtctr r12
/* 80402788 003FE428  4E 80 04 20 */	bctr 
/* 8040278C 003FE42C  4E 80 00 20 */	blr 

.global "__DBIntrHandler"
"__DBIntrHandler":
/* 80402790 003FE430  38 00 10 00 */	li r0, 0x1000
/* 80402794 003FE434  3C A0 CC 00 */	lis r5, 0xCC003000@ha
/* 80402798 003FE438  90 05 30 00 */	stw r0, 0xCC003000@l(r5)
/* 8040279C 003FE43C  81 8D C9 9C */	lwz r12, "__DBDbgCallback"-_SDA_BASE_(r13)
/* 804027A0 003FE440  2C 0C 00 00 */	cmpwi r12, 0
/* 804027A4 003FE444  4D 82 00 20 */	beqlr 
/* 804027A8 003FE448  7D 89 03 A6 */	mtctr r12
/* 804027AC 003FE44C  4E 80 04 20 */	bctr 
/* 804027B0 003FE450  4E 80 00 20 */	blr 

.global "DBInitComm"
"DBInitComm":
/* 804027B4 003FE454  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 804027B8 003FE458  7C 08 02 A6 */	mflr r0
/* 804027BC 003FE45C  90 01 00 24 */	stw r0, 0x24(r1)
/* 804027C0 003FE460  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 804027C4 003FE464  93 C1 00 18 */	stw r30, 0x18(r1)
/* 804027C8 003FE468  7C 9E 23 78 */	mr r30, r4
/* 804027CC 003FE46C  93 A1 00 14 */	stw r29, 0x14(r1)
/* 804027D0 003FE470  7C 7D 1B 78 */	mr r29, r3
/* 804027D4 003FE474  4B FD DC 89 */	bl "__RAS_OSDisableInterrupts_begin"
/* 804027D8 003FE478  38 0D C9 A0 */	addi r0, r13, "__DBEXIInputFlag"-_SDA_BASE_
/* 804027DC 003FE47C  7C 7F 1B 78 */	mr r31, r3
/* 804027E0 003FE480  90 1D 00 00 */	stw r0, 0(r29)
/* 804027E4 003FE484  93 CD C9 98 */	stw r30, "__DBMtrCallback"-_SDA_BASE_(r13)
/* 804027E8 003FE488  48 00 05 A1 */	bl "__DBEXIInit"
/* 804027EC 003FE48C  7F E3 FB 78 */	mr r3, r31
/* 804027F0 003FE490  4B FD DC 95 */	bl "OSRestoreInterrupts"
/* 804027F4 003FE494  80 01 00 24 */	lwz r0, 0x24(r1)
/* 804027F8 003FE498  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 804027FC 003FE49C  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 80402800 003FE4A0  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 80402804 003FE4A4  7C 08 03 A6 */	mtlr r0
/* 80402808 003FE4A8  38 21 00 20 */	addi r1, r1, 0x20
/* 8040280C 003FE4AC  4E 80 00 20 */	blr 

.global "DBInitInterrupts"
"DBInitInterrupts":
/* 80402810 003FE4B0  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 80402814 003FE4B4  7C 08 02 A6 */	mflr r0
/* 80402818 003FE4B8  3C 60 00 02 */	lis r3, 0x00018000@ha
/* 8040281C 003FE4BC  90 01 00 14 */	stw r0, 0x14(r1)
/* 80402820 003FE4C0  38 63 80 00 */	addi r3, r3, 0x00018000@l
/* 80402824 003FE4C4  4B FD DF C9 */	bl "__OSMaskInterrupts"
/* 80402828 003FE4C8  38 60 00 40 */	li r3, 0x40
/* 8040282C 003FE4CC  4B FD DF C1 */	bl "__OSMaskInterrupts"
/* 80402830 003FE4D0  3C 60 80 40 */	lis r3, "__DBMtrHandler"@ha
/* 80402834 003FE4D4  3C 80 80 40 */	lis r4, "__DBIntrHandler"@ha
/* 80402838 003FE4D8  38 63 27 6C */	addi r3, r3, "__DBMtrHandler"@l
/* 8040283C 003FE4DC  90 6D C9 9C */	stw r3, "__DBDbgCallback"-_SDA_BASE_(r13)
/* 80402840 003FE4E0  38 84 27 90 */	addi r4, r4, "__DBIntrHandler"@l
/* 80402844 003FE4E4  38 60 00 19 */	li r3, 0x19
/* 80402848 003FE4E8  4B FD DC 61 */	bl "__OSSetInterruptHandler"
/* 8040284C 003FE4EC  38 60 00 40 */	li r3, 0x40
/* 80402850 003FE4F0  4B FD E0 1D */	bl "__OSUnmaskInterrupts"
/* 80402854 003FE4F4  80 01 00 14 */	lwz r0, 0x14(r1)
/* 80402858 003FE4F8  7C 08 03 A6 */	mtlr r0
/* 8040285C 003FE4FC  38 21 00 10 */	addi r1, r1, 0x10
/* 80402860 003FE500  4E 80 00 20 */	blr 

.global "DBQueryData"
"DBQueryData":
/* 80402864 003FE504  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 80402868 003FE508  7C 08 02 A6 */	mflr r0
/* 8040286C 003FE50C  38 60 00 00 */	li r3, 0
/* 80402870 003FE510  90 01 00 24 */	stw r0, 0x24(r1)
/* 80402874 003FE514  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 80402878 003FE518  80 0D C9 A8 */	lwz r0, "__DBRecvDataSize"-_SDA_BASE_(r13)
/* 8040287C 003FE51C  98 6D C9 A0 */	stb r3, "__DBEXIInputFlag"-_SDA_BASE_(r13)
/* 80402880 003FE520  2C 00 00 00 */	cmpwi r0, 0
/* 80402884 003FE524  40 82 00 6C */	bne lbl_804028F0
/* 80402888 003FE528  4B FD DB D5 */	bl "__RAS_OSDisableInterrupts_begin"
/* 8040288C 003FE52C  7C 7F 1B 78 */	mr r31, r3
/* 80402890 003FE530  38 81 00 08 */	addi r4, r1, 8
/* 80402894 003FE534  3C 60 34 00 */	lis r3, 0x3400
/* 80402898 003FE538  38 A0 00 01 */	li r5, 1
/* 8040289C 003FE53C  48 00 05 A9 */	bl "__DBEXIReadReg"
/* 804028A0 003FE540  88 01 00 08 */	lbz r0, 8(r1)
/* 804028A4 003FE544  54 00 07 39 */	rlwinm. r0, r0, 0, 0x1c, 0x1c
/* 804028A8 003FE548  40 82 00 40 */	bne lbl_804028E8
/* 804028AC 003FE54C  3C 60 34 00 */	lis r3, 0x34000200@ha
/* 804028B0 003FE550  38 81 00 0C */	addi r4, r1, 0xc
/* 804028B4 003FE554  38 63 02 00 */	addi r3, r3, 0x34000200@l
/* 804028B8 003FE558  38 A0 00 04 */	li r5, 4
/* 804028BC 003FE55C  48 00 05 89 */	bl "__DBEXIReadReg"
/* 804028C0 003FE560  80 81 00 0C */	lwz r4, 0xc(r1)
/* 804028C4 003FE564  54 83 00 CE */	rlwinm r3, r4, 0, 3, 7
/* 804028C8 003FE568  3C 03 E1 00 */	addis r0, r3, 0xe100
/* 804028CC 003FE56C  28 00 00 00 */	cmplwi r0, 0
/* 804028D0 003FE570  40 82 00 18 */	bne lbl_804028E8
/* 804028D4 003FE574  54 83 04 FE */	clrlwi r3, r4, 0x13
/* 804028D8 003FE578  38 00 00 01 */	li r0, 1
/* 804028DC 003FE57C  90 8D C9 A4 */	stw r4, "__DBRecvMail"-_SDA_BASE_(r13)
/* 804028E0 003FE580  90 6D C9 A8 */	stw r3, "__DBRecvDataSize"-_SDA_BASE_(r13)
/* 804028E4 003FE584  98 0D C9 A0 */	stb r0, "__DBEXIInputFlag"-_SDA_BASE_(r13)
lbl_804028E8:
/* 804028E8 003FE588  7F E3 FB 78 */	mr r3, r31
/* 804028EC 003FE58C  4B FD DB 99 */	bl "OSRestoreInterrupts"
lbl_804028F0:
/* 804028F0 003FE590  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 804028F4 003FE594  80 01 00 24 */	lwz r0, 0x24(r1)
/* 804028F8 003FE598  80 6D C9 A8 */	lwz r3, "__DBRecvDataSize"-_SDA_BASE_(r13)
/* 804028FC 003FE59C  7C 08 03 A6 */	mtlr r0
/* 80402900 003FE5A0  38 21 00 20 */	addi r1, r1, 0x20
/* 80402904 003FE5A4  4E 80 00 20 */	blr 

.global "DBRead"
"DBRead":
/* 80402908 003FE5A8  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8040290C 003FE5AC  7C 08 02 A6 */	mflr r0
/* 80402910 003FE5B0  90 01 00 14 */	stw r0, 0x14(r1)
/* 80402914 003FE5B4  93 E1 00 0C */	stw r31, 0xc(r1)
/* 80402918 003FE5B8  7C 9F 23 78 */	mr r31, r4
/* 8040291C 003FE5BC  93 C1 00 08 */	stw r30, 8(r1)
/* 80402920 003FE5C0  7C 7E 1B 78 */	mr r30, r3
/* 80402924 003FE5C4  4B FD DB 39 */	bl "__RAS_OSDisableInterrupts_begin"
/* 80402928 003FE5C8  80 AD C9 A4 */	lwz r5, "__DBRecvMail"-_SDA_BASE_(r13)
/* 8040292C 003FE5CC  38 1F 00 03 */	addi r0, r31, 3
/* 80402930 003FE5D0  7C 7F 1B 78 */	mr r31, r3
/* 80402934 003FE5D4  7F C4 F3 78 */	mr r4, r30
/* 80402938 003FE5D8  54 A3 87 FE */	rlwinm r3, r5, 0x10, 0x1f, 0x1f
/* 8040293C 003FE5DC  54 05 00 3A */	rlwinm r5, r0, 0, 0, 0x1d
/* 80402940 003FE5E0  7C 03 00 D0 */	neg r0, r3
/* 80402944 003FE5E4  54 03 05 28 */	rlwinm r3, r0, 0, 0x14, 0x14
/* 80402948 003FE5E8  3C 63 00 D1 */	addis r3, r3, 0xd1
/* 8040294C 003FE5EC  38 03 10 00 */	addi r0, r3, 0x1000
/* 80402950 003FE5F0  54 03 30 AE */	rlwinm r3, r0, 6, 2, 0x17
/* 80402954 003FE5F4  48 00 07 19 */	bl "__DBEXIReadRam"
/* 80402958 003FE5F8  38 00 00 00 */	li r0, 0
/* 8040295C 003FE5FC  7F E3 FB 78 */	mr r3, r31
/* 80402960 003FE600  90 0D C9 A8 */	stw r0, "__DBRecvDataSize"-_SDA_BASE_(r13)
/* 80402964 003FE604  98 0D C9 A0 */	stb r0, "__DBEXIInputFlag"-_SDA_BASE_(r13)
/* 80402968 003FE608  4B FD DB 1D */	bl "OSRestoreInterrupts"
/* 8040296C 003FE60C  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 80402970 003FE610  38 60 00 00 */	li r3, 0
/* 80402974 003FE614  83 C1 00 08 */	lwz r30, 8(r1)
/* 80402978 003FE618  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8040297C 003FE61C  7C 08 03 A6 */	mtlr r0
/* 80402980 003FE620  38 21 00 10 */	addi r1, r1, 0x10
/* 80402984 003FE624  4E 80 00 20 */	blr 

.global "DBWrite"
"DBWrite":
/* 80402988 003FE628  94 21 FF D0 */	stwu r1, -0x30(r1)
/* 8040298C 003FE62C  7C 08 02 A6 */	mflr r0
/* 80402990 003FE630  90 01 00 34 */	stw r0, 0x34(r1)
/* 80402994 003FE634  39 61 00 30 */	addi r11, r1, 0x30
/* 80402998 003FE638  48 00 C9 DD */	bl "_savegpr_27"
/* 8040299C 003FE63C  7C 7B 1B 78 */	mr r27, r3
/* 804029A0 003FE640  7C 9C 23 78 */	mr r28, r4
/* 804029A4 003FE644  4B FD DA B9 */	bl "__RAS_OSDisableInterrupts_begin"
/* 804029A8 003FE648  7C 7F 1B 78 */	mr r31, r3
lbl_804029AC:
/* 804029AC 003FE64C  38 81 00 0A */	addi r4, r1, 0xa
/* 804029B0 003FE650  3C 60 34 00 */	lis r3, 0x3400
/* 804029B4 003FE654  38 A0 00 01 */	li r5, 1
/* 804029B8 003FE658  48 00 04 8D */	bl "__DBEXIReadReg"
/* 804029BC 003FE65C  88 01 00 0A */	lbz r0, 0xa(r1)
/* 804029C0 003FE660  54 00 07 7B */	rlwinm. r0, r0, 0, 0x1d, 0x1d
/* 804029C4 003FE664  40 82 FF E8 */	bne lbl_804029AC
/* 804029C8 003FE668  88 6D B2 A8 */	lbz r3, "l_byOffsetCounter$639"-_SDA_BASE_(r13)
/* 804029CC 003FE66C  38 1C 00 03 */	addi r0, r28, 3
/* 804029D0 003FE670  54 1D 00 3A */	rlwinm r29, r0, 0, 0, 0x1d
/* 804029D4 003FE674  38 63 00 01 */	addi r3, r3, 1
/* 804029D8 003FE678  54 60 07 FE */	clrlwi r0, r3, 0x1f
/* 804029DC 003FE67C  98 6D B2 A8 */	stb r3, "l_byOffsetCounter$639"-_SDA_BASE_(r13)
/* 804029E0 003FE680  7C 00 00 D0 */	neg r0, r0
/* 804029E4 003FE684  54 03 05 28 */	rlwinm r3, r0, 0, 0x14, 0x14
/* 804029E8 003FE688  3C 03 00 D1 */	addis r0, r3, 0xd1
/* 804029EC 003FE68C  54 00 30 AE */	rlwinm r0, r0, 6, 2, 0x17
/* 804029F0 003FE690  64 1E 80 00 */	oris r30, r0, 0x8000
lbl_804029F4:
/* 804029F4 003FE694  7F C3 F3 78 */	mr r3, r30
/* 804029F8 003FE698  7F 64 DB 78 */	mr r4, r27
/* 804029FC 003FE69C  7F A5 EB 78 */	mr r5, r29
/* 80402A00 003FE6A0  48 00 07 4D */	bl "__DBEXIWriteRam"
/* 80402A04 003FE6A4  2C 03 00 00 */	cmpwi r3, 0
/* 80402A08 003FE6A8  41 82 FF EC */	beq lbl_804029F4
lbl_80402A0C:
/* 80402A0C 003FE6AC  38 81 00 09 */	addi r4, r1, 9
/* 80402A10 003FE6B0  3C 60 34 00 */	lis r3, 0x3400
/* 80402A14 003FE6B4  38 A0 00 01 */	li r5, 1
/* 80402A18 003FE6B8  48 00 04 2D */	bl "__DBEXIReadReg"
/* 80402A1C 003FE6BC  88 01 00 09 */	lbz r0, 9(r1)
/* 80402A20 003FE6C0  54 00 07 7B */	rlwinm. r0, r0, 0, 0x1d, 0x1d
/* 80402A24 003FE6C4  40 82 FF E8 */	bne lbl_80402A0C
/* 80402A28 003FE6C8  88 6D B2 A8 */	lbz r3, "l_byOffsetCounter$639"-_SDA_BASE_(r13)
/* 80402A2C 003FE6CC  57 80 04 FE */	clrlwi r0, r28, 0x13
/* 80402A30 003FE6D0  64 1D 1F 00 */	oris r29, r0, 0x1f00
/* 80402A34 003FE6D4  3F C0 B4 00 */	lis r30, 0xB4000100@ha
/* 80402A38 003FE6D8  50 7D 82 1E */	rlwimi r29, r3, 0x10, 8, 0xf
lbl_80402A3C:
/* 80402A3C 003FE6DC  93 A1 00 0C */	stw r29, 0xc(r1)
/* 80402A40 003FE6E0  38 7E 01 00 */	addi r3, r30, 0xB4000100@l
/* 80402A44 003FE6E4  38 81 00 0C */	addi r4, r1, 0xc
/* 80402A48 003FE6E8  38 A0 00 04 */	li r5, 4
/* 80402A4C 003FE6EC  48 00 05 1D */	bl "__DBEXIWriteReg"
/* 80402A50 003FE6F0  2C 03 00 00 */	cmpwi r3, 0
/* 80402A54 003FE6F4  41 82 FF E8 */	beq lbl_80402A3C
lbl_80402A58:
/* 80402A58 003FE6F8  38 81 00 08 */	addi r4, r1, 8
/* 80402A5C 003FE6FC  3C 60 34 00 */	lis r3, 0x3400
/* 80402A60 003FE700  38 A0 00 01 */	li r5, 1
/* 80402A64 003FE704  48 00 03 E1 */	bl "__DBEXIReadReg"
/* 80402A68 003FE708  88 01 00 08 */	lbz r0, 8(r1)
/* 80402A6C 003FE70C  54 00 07 7B */	rlwinm. r0, r0, 0, 0x1d, 0x1d
/* 80402A70 003FE710  40 82 FF E8 */	bne lbl_80402A58
/* 80402A74 003FE714  7F E3 FB 78 */	mr r3, r31
/* 80402A78 003FE718  4B FD DA 0D */	bl "OSRestoreInterrupts"
/* 80402A7C 003FE71C  39 61 00 30 */	addi r11, r1, 0x30
/* 80402A80 003FE720  38 60 00 00 */	li r3, 0
/* 80402A84 003FE724  48 00 C9 3D */	bl "_restgpr_27"
/* 80402A88 003FE728  80 01 00 34 */	lwz r0, 0x34(r1)
/* 80402A8C 003FE72C  7C 08 03 A6 */	mtlr r0
/* 80402A90 003FE730  38 21 00 30 */	addi r1, r1, 0x30
/* 80402A94 003FE734  4E 80 00 20 */	blr 

.global "DBOpen"
"DBOpen":
/* 80402A98 003FE738  4E 80 00 20 */	blr 

.global "DBClose"
"DBClose":
/* 80402A9C 003FE73C  4E 80 00 20 */	blr 
