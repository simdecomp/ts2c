.include "macros.inc"

.section .text, "ax"  # 0x80006940 - 0x80418B80
.global "__OSWriteStateFlags"
"__OSWriteStateFlags":
/* 803E53D4 003E1074  94 21 FF 60 */	stwu r1, -0xa0(r1)
/* 803E53D8 003E1078  7C 08 02 A6 */	mflr r0
/* 803E53DC 003E107C  7C 64 1B 78 */	mr r4, r3
/* 803E53E0 003E1080  38 A0 00 20 */	li r5, 0x20
/* 803E53E4 003E1084  90 01 00 A4 */	stw r0, 0xa4(r1)
/* 803E53E8 003E1088  93 E1 00 9C */	stw r31, 0x9c(r1)
/* 803E53EC 003E108C  93 C1 00 98 */	stw r30, 0x98(r1)
/* 803E53F0 003E1090  3F C0 80 5C */	lis r30, "StateFlags"@ha
/* 803E53F4 003E1094  38 7E 41 60 */	addi r3, r30, "StateFlags"@l
/* 803E53F8 003E1098  4B C1 EF 41 */	bl "memcpy"
/* 803E53FC 003E109C  3B FE 41 60 */	addi r31, r30, 0x4160
/* 803E5400 003E10A0  3C 60 80 48 */	lis r3, lbl_804837A8@ha
/* 803E5404 003E10A4  80 DF 00 04 */	lwz r6, 4(r31)
/* 803E5408 003E10A8  38 63 37 A8 */	addi r3, r3, lbl_804837A8@l
/* 803E540C 003E10AC  80 1F 00 08 */	lwz r0, 8(r31)
/* 803E5410 003E10B0  38 81 00 08 */	addi r4, r1, 8
/* 803E5414 003E10B4  38 A0 00 02 */	li r5, 2
/* 803E5418 003E10B8  7C C6 02 14 */	add r6, r6, r0
/* 803E541C 003E10BC  80 1F 00 0C */	lwz r0, 0xc(r31)
/* 803E5420 003E10C0  7C C6 02 14 */	add r6, r6, r0
/* 803E5424 003E10C4  80 1F 00 10 */	lwz r0, 0x10(r31)
/* 803E5428 003E10C8  7C C6 02 14 */	add r6, r6, r0
/* 803E542C 003E10CC  80 1F 00 14 */	lwz r0, 0x14(r31)
/* 803E5430 003E10D0  7C C6 02 14 */	add r6, r6, r0
/* 803E5434 003E10D4  80 1F 00 18 */	lwz r0, 0x18(r31)
/* 803E5438 003E10D8  7C C6 02 14 */	add r6, r6, r0
/* 803E543C 003E10DC  80 1F 00 1C */	lwz r0, 0x1c(r31)
/* 803E5440 003E10E0  7C C6 02 14 */	add r6, r6, r0
/* 803E5444 003E10E4  90 DE 41 60 */	stw r6, 0x4160(r30)
/* 803E5448 003E10E8  4B FF 35 F1 */	bl "NANDOpen"
/* 803E544C 003E10EC  2C 03 00 00 */	cmpwi r3, 0
/* 803E5450 003E10F0  40 82 00 44 */	bne lbl_803E5494
/* 803E5454 003E10F4  7F E4 FB 78 */	mr r4, r31
/* 803E5458 003E10F8  38 61 00 08 */	addi r3, r1, 8
/* 803E545C 003E10FC  38 A0 00 20 */	li r5, 0x20
/* 803E5460 003E1100  4B FF 2D C5 */	bl "NANDWrite"
/* 803E5464 003E1104  28 03 00 20 */	cmplwi r3, 0x20
/* 803E5468 003E1108  41 82 00 14 */	beq lbl_803E547C
/* 803E546C 003E110C  38 61 00 08 */	addi r3, r1, 8
/* 803E5470 003E1110  4B FF 38 49 */	bl "NANDClose"
/* 803E5474 003E1114  38 60 00 00 */	li r3, 0
/* 803E5478 003E1118  48 00 00 28 */	b lbl_803E54A0
lbl_803E547C:
/* 803E547C 003E111C  38 61 00 08 */	addi r3, r1, 8
/* 803E5480 003E1120  4B FF 38 39 */	bl "NANDClose"
/* 803E5484 003E1124  2C 03 00 00 */	cmpwi r3, 0
/* 803E5488 003E1128  41 82 00 14 */	beq lbl_803E549C
/* 803E548C 003E112C  38 60 00 00 */	li r3, 0
/* 803E5490 003E1130  48 00 00 10 */	b lbl_803E54A0
lbl_803E5494:
/* 803E5494 003E1134  38 60 00 00 */	li r3, 0
/* 803E5498 003E1138  48 00 00 08 */	b lbl_803E54A0
lbl_803E549C:
/* 803E549C 003E113C  38 60 00 01 */	li r3, 1
lbl_803E54A0:
/* 803E54A0 003E1140  80 01 00 A4 */	lwz r0, 0xa4(r1)
/* 803E54A4 003E1144  83 E1 00 9C */	lwz r31, 0x9c(r1)
/* 803E54A8 003E1148  83 C1 00 98 */	lwz r30, 0x98(r1)
/* 803E54AC 003E114C  7C 08 03 A6 */	mtlr r0
/* 803E54B0 003E1150  38 21 00 A0 */	addi r1, r1, 0xa0
/* 803E54B4 003E1154  4E 80 00 20 */	blr

.global "__OSReadStateFlags"
"__OSReadStateFlags":
/* 803E54B8 003E1158  94 21 FF 50 */	stwu r1, -0xb0(r1)
/* 803E54BC 003E115C  7C 08 02 A6 */	mflr r0
/* 803E54C0 003E1160  38 A0 00 01 */	li r5, 1
/* 803E54C4 003E1164  90 01 00 B4 */	stw r0, 0xb4(r1)
/* 803E54C8 003E1168  38 81 00 08 */	addi r4, r1, 8
/* 803E54CC 003E116C  93 E1 00 AC */	stw r31, 0xac(r1)
/* 803E54D0 003E1170  93 C1 00 A8 */	stw r30, 0xa8(r1)
/* 803E54D4 003E1174  93 A1 00 A4 */	stw r29, 0xa4(r1)
/* 803E54D8 003E1178  3F A0 80 48 */	lis r29, lbl_804837A8@ha
/* 803E54DC 003E117C  93 81 00 A0 */	stw r28, 0xa0(r1)
/* 803E54E0 003E1180  7C 7C 1B 78 */	mr r28, r3
/* 803E54E4 003E1184  38 7D 37 A8 */	addi r3, r29, lbl_804837A8@l
/* 803E54E8 003E1188  4B FF 35 51 */	bl "NANDOpen"
/* 803E54EC 003E118C  2C 03 00 00 */	cmpwi r3, 0
/* 803E54F0 003E1190  40 82 00 4C */	bne lbl_803E553C
/* 803E54F4 003E1194  3F C0 80 5C */	lis r30, "StateFlags"@ha
/* 803E54F8 003E1198  38 61 00 08 */	addi r3, r1, 8
/* 803E54FC 003E119C  38 9E 41 60 */	addi r4, r30, "StateFlags"@l
/* 803E5500 003E11A0  38 A0 00 20 */	li r5, 0x20
/* 803E5504 003E11A4  4B FF 2C 41 */	bl "NANDRead"
/* 803E5508 003E11A8  7C 7F 1B 78 */	mr r31, r3
/* 803E550C 003E11AC  38 61 00 08 */	addi r3, r1, 8
/* 803E5510 003E11B0  4B FF 37 A9 */	bl "NANDClose"
/* 803E5514 003E11B4  28 1F 00 20 */	cmplwi r31, 0x20
/* 803E5518 003E11B8  41 82 00 3C */	beq lbl_803E5554
/* 803E551C 003E11BC  38 7D 37 A8 */	addi r3, r29, 0x37a8
/* 803E5520 003E11C0  4B FF 2A B5 */	bl "NANDDelete"
/* 803E5524 003E11C4  7F 83 E3 78 */	mr r3, r28
/* 803E5528 003E11C8  38 80 00 00 */	li r4, 0
/* 803E552C 003E11CC  38 A0 00 20 */	li r5, 0x20
/* 803E5530 003E11D0  4B C1 EF 0D */	bl "memset"
/* 803E5534 003E11D4  38 60 00 00 */	li r3, 0
/* 803E5538 003E11D8  48 00 00 88 */	b lbl_803E55C0
lbl_803E553C:
/* 803E553C 003E11DC  7F 83 E3 78 */	mr r3, r28
/* 803E5540 003E11E0  38 80 00 00 */	li r4, 0
/* 803E5544 003E11E4  38 A0 00 20 */	li r5, 0x20
/* 803E5548 003E11E8  4B C1 EE F5 */	bl "memset"
/* 803E554C 003E11EC  38 60 00 00 */	li r3, 0
/* 803E5550 003E11F0  48 00 00 70 */	b lbl_803E55C0
lbl_803E5554:
/* 803E5554 003E11F4  38 9E 41 60 */	addi r4, r30, 0x4160
/* 803E5558 003E11F8  80 1E 41 60 */	lwz r0, 0x4160(r30)
/* 803E555C 003E11FC  80 A4 00 04 */	lwz r5, 4(r4)
/* 803E5560 003E1200  80 64 00 08 */	lwz r3, 8(r4)
/* 803E5564 003E1204  7C A5 1A 14 */	add r5, r5, r3
/* 803E5568 003E1208  80 64 00 0C */	lwz r3, 0xc(r4)
/* 803E556C 003E120C  7C A5 1A 14 */	add r5, r5, r3
/* 803E5570 003E1210  80 64 00 10 */	lwz r3, 0x10(r4)
/* 803E5574 003E1214  7C A5 1A 14 */	add r5, r5, r3
/* 803E5578 003E1218  80 64 00 14 */	lwz r3, 0x14(r4)
/* 803E557C 003E121C  7C A5 1A 14 */	add r5, r5, r3
/* 803E5580 003E1220  80 64 00 18 */	lwz r3, 0x18(r4)
/* 803E5584 003E1224  7C A5 1A 14 */	add r5, r5, r3
/* 803E5588 003E1228  80 64 00 1C */	lwz r3, 0x1c(r4)
/* 803E558C 003E122C  7C A5 1A 14 */	add r5, r5, r3
/* 803E5590 003E1230  7C 00 28 40 */	cmplw r0, r5
/* 803E5594 003E1234  41 82 00 1C */	beq lbl_803E55B0
/* 803E5598 003E1238  7F 83 E3 78 */	mr r3, r28
/* 803E559C 003E123C  38 80 00 00 */	li r4, 0
/* 803E55A0 003E1240  38 A0 00 20 */	li r5, 0x20
/* 803E55A4 003E1244  4B C1 EE 99 */	bl "memset"
/* 803E55A8 003E1248  38 60 00 00 */	li r3, 0
/* 803E55AC 003E124C  48 00 00 14 */	b lbl_803E55C0
lbl_803E55B0:
/* 803E55B0 003E1250  7F 83 E3 78 */	mr r3, r28
/* 803E55B4 003E1254  38 A0 00 20 */	li r5, 0x20
/* 803E55B8 003E1258  4B C1 ED 81 */	bl "memcpy"
/* 803E55BC 003E125C  38 60 00 01 */	li r3, 1
lbl_803E55C0:
/* 803E55C0 003E1260  80 01 00 B4 */	lwz r0, 0xb4(r1)
/* 803E55C4 003E1264  83 E1 00 AC */	lwz r31, 0xac(r1)
/* 803E55C8 003E1268  83 C1 00 A8 */	lwz r30, 0xa8(r1)
/* 803E55CC 003E126C  83 A1 00 A4 */	lwz r29, 0xa4(r1)
/* 803E55D0 003E1270  83 81 00 A0 */	lwz r28, 0xa0(r1)
/* 803E55D4 003E1274  7C 08 03 A6 */	mtlr r0
/* 803E55D8 003E1278  38 21 00 B0 */	addi r1, r1, 0xb0
/* 803E55DC 003E127C  4E 80 00 20 */	blr

.section .data, "wa"  # 0x80420060 - 0x80488160
.global lbl_804837A8
lbl_804837A8:
	# ROM: 0x47F8A8
	.asciz "/title/00000001/00000002/data/state.dat"


.section .bss, "wa"  # 0x80488180 - 0x805DC448
.global "StateFlags"
"StateFlags":
	.skip 0x20
